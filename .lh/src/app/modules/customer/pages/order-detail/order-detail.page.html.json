{
    "sourceFile": "src/app/modules/customer/pages/order-detail/order-detail.page.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1763390264235,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763883616883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -56,34 +56,54 @@\n         <ion-card-header>\r\n           <ion-card-title>Delivery Information</ion-card-title>\r\n         </ion-card-header>\r\n         <ion-card-content>\r\n-          <ion-list>\r\n+          @if (isEditing) {\r\n             <ion-item>\r\n-              <ion-icon name=\"location\" slot=\"start\"></ion-icon>\r\n-              <ion-label class=\"ion-text-wrap\">\r\n-                <h3>Delivery Address</h3>\r\n-                <p>{{ order.pickupLocation || 'No address provided' }}</p>\r\n-              </ion-label>\r\n+              <ion-label position=\"stacked\">Delivery Address</ion-label>\r\n+              <ion-textarea\r\n+                [(ngModel)]=\"editData.pickupLocation\"\r\n+                rows=\"3\"\r\n+                placeholder=\"Enter delivery address\">\r\n+              </ion-textarea>\r\n             </ion-item>\r\n-          </ion-list>\r\n+          } @else {\r\n+            <ion-list>\r\n+              <ion-item>\r\n+                <ion-icon name=\"location\" slot=\"start\"></ion-icon>\r\n+                <ion-label class=\"ion-text-wrap\">\r\n+                  <h3>Delivery Address</h3>\r\n+                  <p>{{ order.pickupLocation || 'No address provided' }}</p>\r\n+                </ion-label>\r\n+              </ion-item>\r\n+            </ion-list>\r\n+          }\r\n         </ion-card-content>\r\n       </ion-card>\r\n \r\n       <!-- Your Notes -->\r\n-      @if (order.notes) {\r\n-        <ion-card>\r\n-          <ion-card-header>\r\n-            <ion-card-title>\r\n-              <ion-icon name=\"document-text\"></ion-icon>\r\n-              Your Notes\r\n-            </ion-card-title>\r\n-          </ion-card-header>\r\n-          <ion-card-content>\r\n-            <p class=\"notes-text\">{{ order.notes }}</p>\r\n-          </ion-card-content>\r\n-        </ion-card>\r\n-      }\r\n+      <ion-card>\r\n+        <ion-card-header>\r\n+          <ion-card-title>\r\n+            <ion-icon name=\"document-text\"></ion-icon>\r\n+            Your Notes\r\n+          </ion-card-title>\r\n+        </ion-card-header>\r\n+        <ion-card-content>\r\n+          @if (isEditing) {\r\n+            <ion-item>\r\n+              <ion-label position=\"stacked\">Order Notes</ion-label>\r\n+              <ion-textarea\r\n+                [(ngModel)]=\"editData.notes\"\r\n+                rows=\"3\"\r\n+                placeholder=\"Add special instructions or notes\">\r\n+              </ion-textarea>\r\n+            </ion-item>\r\n+          } @else {\r\n+            <p class=\"notes-text\">{{ order.notes || 'No notes added' }}</p>\r\n+          }\r\n+        </ion-card-content>\r\n+      </ion-card>\r\n \r\n       <!-- Order Items -->\r\n       <ion-card>\r\n         <ion-card-header>\r\n@@ -117,12 +137,37 @@\n       </ion-card>\r\n \r\n       <!-- Actions -->\r\n       <div class=\"action-buttons\">\r\n-        <ion-button expand=\"block\" fill=\"outline\" (click)=\"messageSeller()\">\r\n-          <ion-icon name=\"chatbubbles\" slot=\"start\"></ion-icon>\r\n-          Message Seller\r\n-        </ion-button>\r\n+        @if (isEditing) {\r\n+          <ion-button expand=\"block\" color=\"success\" (click)=\"saveOrderChanges()\" [disabled]=\"loading\">\r\n+            <ion-icon name=\"checkmark\" slot=\"start\"></ion-icon>\r\n+            Save Changes\r\n+          </ion-button>\r\n+          <ion-button expand=\"block\" fill=\"outline\" (click)=\"cancelEdit()\">\r\n+            <ion-icon name=\"close\" slot=\"start\"></ion-icon>\r\n+            Cancel Edit\r\n+          </ion-button>\r\n+        } @else {\r\n+          <ion-button expand=\"block\" fill=\"outline\" (click)=\"messageSeller()\">\r\n+            <ion-icon name=\"chatbubbles\" slot=\"start\"></ion-icon>\r\n+            Message Seller\r\n+          </ion-button>\r\n+          \r\n+          @if (canEditOrder()) {\r\n+            <ion-button expand=\"block\" color=\"secondary\" (click)=\"startEditOrder()\">\r\n+              <ion-icon name=\"create\" slot=\"start\"></ion-icon>\r\n+              Edit Order\r\n+            </ion-button>\r\n+          }\r\n+          \r\n+          @if (canCancelOrder()) {\r\n+            <ion-button expand=\"block\" color=\"danger\" (click)=\"cancelOrder()\">\r\n+              <ion-icon name=\"close-circle\" slot=\"start\"></ion-icon>\r\n+              Cancel Order\r\n+            </ion-button>\r\n+          }\r\n+        }\r\n       </div>\r\n     </div>\r\n   }\r\n </ion-content>\r\n"
                }
            ],
            "date": 1763390264235,
            "name": "Commit-0",
            "content": "<ion-header [translucent]=\"true\">\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/customer/orders\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Order Details</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  @if (loading) {\r\n    <div class=\"loading-container\">\r\n      <ion-spinner name=\"crescent\"></ion-spinner>\r\n    </div>\r\n  }\r\n\r\n  @if (!loading && order) {\r\n    <div class=\"order-detail-container\">\r\n      <!-- Order Info -->\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title>Order #{{ order.orderId?.substring(0, 8) }}</ion-card-title>\r\n          <ion-card-subtitle>\r\n            <ion-badge [color]=\"getStatusColor(order.status)\">{{ order.status | uppercase }}</ion-badge>\r\n          </ion-card-subtitle>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <ion-list>\r\n            <ion-item>\r\n              <ion-icon name=\"storefront\" slot=\"start\"></ion-icon>\r\n              <ion-label>\r\n                <h3>Seller</h3>\r\n                <p>{{ order.sellerName }}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n            <ion-item>\r\n              <ion-icon name=\"calendar\" slot=\"start\"></ion-icon>\r\n              <ion-label>\r\n                <h3>Order Date</h3>\r\n                <p>{{ order.createdAt?.toDate() | date:'medium' }}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n            <ion-item>\r\n              <ion-icon name=\"cash\" slot=\"start\"></ion-icon>\r\n              <ion-label>\r\n                <h3>Total Amount</h3>\r\n                <p>₱{{ order.totalPrice | number:'1.2-2' }}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n          </ion-list>\r\n        </ion-card-content>\r\n      </ion-card>\r\n\r\n      <!-- Delivery Information -->\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title>Delivery Information</ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <ion-list>\r\n            <ion-item>\r\n              <ion-icon name=\"location\" slot=\"start\"></ion-icon>\r\n              <ion-label class=\"ion-text-wrap\">\r\n                <h3>Delivery Address</h3>\r\n                <p>{{ order.pickupLocation || 'No address provided' }}</p>\r\n              </ion-label>\r\n            </ion-item>\r\n          </ion-list>\r\n        </ion-card-content>\r\n      </ion-card>\r\n\r\n      <!-- Your Notes -->\r\n      @if (order.notes) {\r\n        <ion-card>\r\n          <ion-card-header>\r\n            <ion-card-title>\r\n              <ion-icon name=\"document-text\"></ion-icon>\r\n              Your Notes\r\n            </ion-card-title>\r\n          </ion-card-header>\r\n          <ion-card-content>\r\n            <p class=\"notes-text\">{{ order.notes }}</p>\r\n          </ion-card-content>\r\n        </ion-card>\r\n      }\r\n\r\n      <!-- Order Items -->\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title>Order Items</ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          @for (item of order.items; track item.productId) {\r\n            <ion-item>\r\n              <ion-thumbnail slot=\"start\">\r\n                <img [src]=\"item.productImage || 'assets/placeholder.png'\" [alt]=\"item.productName\" />\r\n              </ion-thumbnail>\r\n              <ion-label>\r\n                <h3>{{ item.productName }}</h3>\r\n                <p>Quantity: {{ item.quantity }}</p>\r\n                <p>₱{{ item.price | number:'1.2-2' }} each</p>\r\n              </ion-label>\r\n              <ion-note slot=\"end\">\r\n                ₱{{ (item.price * item.quantity) | number:'1.2-2' }}\r\n              </ion-note>\r\n            </ion-item>\r\n          }\r\n          <ion-item lines=\"none\">\r\n            <ion-label>\r\n              <h2><strong>Total</strong></h2>\r\n            </ion-label>\r\n            <ion-note slot=\"end\" color=\"primary\">\r\n              <h2><strong>₱{{ order.totalPrice | number:'1.2-2' }}</strong></h2>\r\n            </ion-note>\r\n          </ion-item>\r\n        </ion-card-content>\r\n      </ion-card>\r\n\r\n      <!-- Actions -->\r\n      <div class=\"action-buttons\">\r\n        <ion-button expand=\"block\" fill=\"outline\" (click)=\"messageSeller()\">\r\n          <ion-icon name=\"chatbubbles\" slot=\"start\"></ion-icon>\r\n          Message Seller\r\n        </ion-button>\r\n      </div>\r\n    </div>\r\n  }\r\n</ion-content>\r\n"
        }
    ]
}