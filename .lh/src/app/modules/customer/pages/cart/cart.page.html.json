{
    "sourceFile": "src/app/modules/customer/pages/cart/cart.page.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1763434788474,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763640119200,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,8 +96,28 @@\n               </ion-item>\r\n             </ion-radio-group>\r\n           </ion-list>\r\n \r\n+          <!-- Meetup Location Input -->\r\n+          @if (checkoutData.paymentMethod === 'meet_and_pay') {\r\n+            <div class=\"meetup-location-section\">\r\n+              <h3>Meetup Location</h3>\r\n+              <ion-item>\r\n+                <ion-label position=\"stacked\">Where would you like to meet?</ion-label>\r\n+                <ion-textarea\r\n+                  [(ngModel)]=\"checkoutData.meetupLocation\"\r\n+                  placeholder=\"e.g., Campus Library, Main Gate, Cafeteria\"\r\n+                  rows=\"3\"\r\n+                  required\r\n+                ></ion-textarea>\r\n+              </ion-item>\r\n+              <ion-note color=\"primary\">\r\n+                <ion-icon name=\"information-circle\"></ion-icon>\r\n+                Specify a convenient and safe meeting location on campus\r\n+              </ion-note>\r\n+            </div>\r\n+          }\r\n+\r\n           <!-- Seller Payment Details -->\r\n           @if (showPaymentProofUpload && sellerPaymentDetails) {\r\n             <ion-card color=\"light\" class=\"payment-details-card\">\r\n               <ion-card-header>\r\n"
                },
                {
                    "date": 1764588884917,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -96,8 +96,33 @@\n               </ion-item>\r\n             </ion-radio-group>\r\n           </ion-list>\r\n \r\n+          <!-- Shipping Location for COD -->\r\n+          @if (checkoutData.paymentMethod === 'cod') {\r\n+            <div class=\"shipping-location-section\">\r\n+              <h3>Delivery Location</h3>\r\n+              <ion-item>\r\n+                <ion-label position=\"stacked\">Campus Location</ion-label>\r\n+                <ion-select \r\n+                  [(ngModel)]=\"checkoutData.shippingLocation\" \r\n+                  (ionChange)=\"onLocationChange()\"\r\n+                  interface=\"action-sheet\"\r\n+                  placeholder=\"Select location\">\r\n+                  @for (location of campusLocations; track location.name) {\r\n+                    <ion-select-option [value]=\"location.name\">\r\n+                      {{ location.name }} (₱{{ location.fee }})\r\n+                    </ion-select-option>\r\n+                  }\r\n+                </ion-select>\r\n+              </ion-item>\r\n+              <ion-note color=\"primary\">\r\n+                <ion-icon name=\"location\"></ion-icon>\r\n+                Shipping fee: ₱{{ checkoutData.shippingFee }} • Max ₱50 within campus\r\n+              </ion-note>\r\n+            </div>\r\n+          }\r\n+\r\n           <!-- Meetup Location Input -->\r\n           @if (checkoutData.paymentMethod === 'meet_and_pay') {\r\n             <div class=\"meetup-location-section\">\r\n               <h3>Meetup Location</h3>\r\n"
                },
                {
                    "date": 1764588899595,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -233,11 +233,17 @@\n           <div class=\"summary-row\">\r\n             <span>Items ({{ getItemCount() }})</span>\r\n             <span>₱{{ getTotal() | number:'1.2-2' }}</span>\r\n           </div>\r\n+          @if (checkoutData.paymentMethod === 'cod') {\r\n+            <div class=\"summary-row\">\r\n+              <span>Shipping Fee ({{ checkoutData.shippingLocation }})</span>\r\n+              <span>₱{{ checkoutData.shippingFee | number:'1.2-2' }}</span>\r\n+            </div>\r\n+          }\r\n           <div class=\"summary-row total\">\r\n             <strong>Total</strong>\r\n-            <strong>₱{{ getTotal() | number:'1.2-2' }}</strong>\r\n+            <strong>₱{{ getTotalWithShipping() | number:'1.2-2' }}</strong>\r\n           </div>\r\n \r\n           <ion-button \r\n             expand=\"block\" \r\n"
                }
            ],
            "date": 1763434788474,
            "name": "Commit-0",
            "content": "<ion-header [translucent]=\"true\">\r\n  <ion-toolbar color=\"primary\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button defaultHref=\"/customer/dashboard\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>Shopping Cart</ion-title>\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  @if (cartItems.length === 0) {\r\n    <div class=\"empty-cart\">\r\n      <ion-icon name=\"cart-outline\" size=\"large\"></ion-icon>\r\n      <h2>Your cart is empty</h2>\r\n      <p>Add some products to get started!</p>\r\n      <ion-button expand=\"block\" (click)=\"continueShopping()\">\r\n        Browse Products\r\n      </ion-button>\r\n    </div>\r\n  }\r\n\r\n  @if (cartItems.length > 0) {\r\n    <div class=\"cart-container\">\r\n      <ion-list>\r\n        @for (item of cartItems; track item.productId) {\r\n          <ion-item-sliding>\r\n            <ion-item>\r\n              <ion-thumbnail slot=\"start\">\r\n                <img [src]=\"item.productImage || 'assets/placeholder.png'\" [alt]=\"item.productName\" />\r\n              </ion-thumbnail>\r\n              \r\n              <ion-label>\r\n                <h2>{{ item.productName }}</h2>\r\n                <p>{{ item.sellerName }}</p>\r\n                <h3 class=\"price\">₱{{ item.price | number:'1.2-2' }}</h3>\r\n              </ion-label>\r\n\r\n              <div class=\"quantity-controls\" slot=\"end\">\r\n                <ion-button fill=\"clear\" size=\"small\" (click)=\"updateQuantity(item, -1)\">\r\n                  <ion-icon name=\"remove-circle\"></ion-icon>\r\n                </ion-button>\r\n                <span class=\"quantity\">{{ item.quantity }}</span>\r\n                <ion-button fill=\"clear\" size=\"small\" (click)=\"updateQuantity(item, 1)\">\r\n                  <ion-icon name=\"add-circle\"></ion-icon>\r\n                </ion-button>\r\n              </div>\r\n            </ion-item>\r\n\r\n            <ion-item-options side=\"end\">\r\n              <ion-item-option color=\"danger\" (click)=\"removeItem(item.productId)\">\r\n                <ion-icon name=\"trash\" slot=\"icon-only\"></ion-icon>\r\n              </ion-item-option>\r\n            </ion-item-options>\r\n          </ion-item-sliding>\r\n        }\r\n      </ion-list>\r\n\r\n      <!-- Payment Method Selection -->\r\n      <ion-card>\r\n        <ion-card-header>\r\n          <ion-card-title>Payment Method</ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <ion-list>\r\n            <ion-radio-group [(ngModel)]=\"checkoutData.paymentMethod\" (ionChange)=\"onPaymentMethodChange()\">\r\n              <ion-item>\r\n                <ion-radio slot=\"start\" value=\"cod\"></ion-radio>\r\n                <ion-label>\r\n                  <h3>Cash on Delivery (COD)</h3>\r\n                  <p>Pay when you receive the item</p>\r\n                </ion-label>\r\n              </ion-item>\r\n\r\n              <ion-item>\r\n                <ion-radio slot=\"start\" value=\"gcash\"></ion-radio>\r\n                <ion-label>\r\n                  <h3>GCash</h3>\r\n                  <p>Pay via GCash and upload proof</p>\r\n                </ion-label>\r\n              </ion-item>\r\n\r\n              <ion-item>\r\n                <ion-radio slot=\"start\" value=\"bank_transfer\"></ion-radio>\r\n                <ion-label>\r\n                  <h3>Bank Transfer</h3>\r\n                  <p>Transfer to seller's bank and upload proof</p>\r\n                </ion-label>\r\n              </ion-item>\r\n\r\n              <ion-item>\r\n                <ion-radio slot=\"start\" value=\"meet_and_pay\"></ion-radio>\r\n                <ion-label>\r\n                  <h3>Meet & Pay</h3>\r\n                  <p>Arrange meetup and pay in person</p>\r\n                </ion-label>\r\n              </ion-item>\r\n            </ion-radio-group>\r\n          </ion-list>\r\n\r\n          <!-- Seller Payment Details -->\r\n          @if (showPaymentProofUpload && sellerPaymentDetails) {\r\n            <ion-card color=\"light\" class=\"payment-details-card\">\r\n              <ion-card-header>\r\n                <ion-card-subtitle>Seller's Payment Details</ion-card-subtitle>\r\n              </ion-card-header>\r\n              <ion-card-content>\r\n                @if (checkoutData.paymentMethod === 'gcash' && sellerPaymentDetails.gcashNumber) {\r\n                  <div class=\"payment-info\">\r\n                    <ion-icon name=\"logo-google\" color=\"primary\"></ion-icon>\r\n                    <div>\r\n                      <p><strong>GCash Number:</strong> {{ sellerPaymentDetails.gcashNumber }}</p>\r\n                      <p><strong>Account Name:</strong> {{ sellerPaymentDetails.gcashName }}</p>\r\n                    </div>\r\n                  </div>\r\n                }\r\n                \r\n                @if (checkoutData.paymentMethod === 'bank_transfer' && sellerPaymentDetails.bankAccount) {\r\n                  <div class=\"payment-info\">\r\n                    <ion-icon name=\"card\" color=\"primary\"></ion-icon>\r\n                    <div>\r\n                      <p><strong>Bank:</strong> {{ sellerPaymentDetails.bankName }}</p>\r\n                      <p><strong>Account Number:</strong> {{ sellerPaymentDetails.bankAccount }}</p>\r\n                      <p><strong>Account Name:</strong> {{ sellerPaymentDetails.bankAccountName }}</p>\r\n                    </div>\r\n                  </div>\r\n                }\r\n\r\n                @if (checkoutData.paymentMethod === 'gcash' && !sellerPaymentDetails.gcashNumber) {\r\n                  <ion-note color=\"warning\">Seller hasn't set up GCash yet. Please choose another method.</ion-note>\r\n                }\r\n\r\n                @if (checkoutData.paymentMethod === 'bank_transfer' && !sellerPaymentDetails.bankAccount) {\r\n                  <ion-note color=\"warning\">Seller hasn't set up bank account yet. Please choose another method.</ion-note>\r\n                }\r\n              </ion-card-content>\r\n            </ion-card>\r\n\r\n            <!-- Payment Proof Upload -->\r\n            @if ((checkoutData.paymentMethod === 'gcash' && sellerPaymentDetails.gcashNumber) || \r\n                 (checkoutData.paymentMethod === 'bank_transfer' && sellerPaymentDetails.bankAccount)) {\r\n              <div class=\"payment-proof-section\">\r\n                <h3>Upload Payment Proof</h3>\r\n                <p class=\"hint\">Screenshot or photo of your payment receipt</p>\r\n                \r\n                @if (!checkoutData.paymentProofImage) {\r\n                  <input \r\n                    type=\"file\" \r\n                    accept=\"image/*\" \r\n                    (change)=\"onPaymentProofSelected($event)\"\r\n                    #fileInput\r\n                    style=\"display: none;\">\r\n                  \r\n                  <ion-button \r\n                    expand=\"block\" \r\n                    fill=\"outline\"\r\n                    (click)=\"fileInput.click()\"\r\n                    [disabled]=\"uploadingProof\">\r\n                    @if (uploadingProof) {\r\n                      <ion-spinner name=\"crescent\"></ion-spinner>\r\n                    } @else {\r\n                      <ion-icon name=\"cloud-upload\" slot=\"start\"></ion-icon>\r\n                      Upload Screenshot\r\n                    }\r\n                  </ion-button>\r\n                } @else {\r\n                  <div class=\"payment-proof-preview\">\r\n                    <img [src]=\"checkoutData.paymentProofImage\" alt=\"Payment proof\" />\r\n                    <ion-button \r\n                      fill=\"clear\" \r\n                      color=\"danger\"\r\n                      (click)=\"removePaymentProof()\">\r\n                      <ion-icon name=\"trash\" slot=\"icon-only\"></ion-icon>\r\n                    </ion-button>\r\n                  </div>\r\n                }\r\n              </div>\r\n            }\r\n          }\r\n        </ion-card-content>\r\n      </ion-card>\r\n\r\n      <!-- Cart Summary -->\r\n      <ion-card class=\"cart-summary\">\r\n        <ion-card-header>\r\n          <ion-card-title>Order Summary</ion-card-title>\r\n        </ion-card-header>\r\n        <ion-card-content>\r\n          <div class=\"summary-row\">\r\n            <span>Items ({{ getItemCount() }})</span>\r\n            <span>₱{{ getTotal() | number:'1.2-2' }}</span>\r\n          </div>\r\n          <div class=\"summary-row total\">\r\n            <strong>Total</strong>\r\n            <strong>₱{{ getTotal() | number:'1.2-2' }}</strong>\r\n          </div>\r\n\r\n          <ion-button \r\n            expand=\"block\" \r\n            size=\"large\"\r\n            (click)=\"checkout()\"\r\n            [disabled]=\"loading || (showPaymentProofUpload && !checkoutData.paymentProofImage && ((checkoutData.paymentMethod === 'gcash' && sellerPaymentDetails?.gcashNumber) || (checkoutData.paymentMethod === 'bank_transfer' && sellerPaymentDetails?.bankAccount)))\">\r\n            @if (loading) {\r\n              <ion-spinner name=\"crescent\"></ion-spinner>\r\n            } @else {\r\n              <ion-icon name=\"card\" slot=\"start\"></ion-icon>\r\n              Proceed to Checkout\r\n            }\r\n          </ion-button>\r\n\r\n          @if (showPaymentProofUpload && !checkoutData.paymentProofImage) {\r\n            <ion-note color=\"warning\" class=\"upload-reminder\">\r\n              Please upload payment proof before checkout\r\n            </ion-note>\r\n          }\r\n        </ion-card-content>\r\n      </ion-card>\r\n    </div>\r\n  }\r\n</ion-content>\r\n"
        }
    ]
}