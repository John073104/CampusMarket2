{
    "sourceFile": "src/app/modules/admin/pages/reports/reports.page.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 23,
            "patches": [
                {
                    "date": 1763388132036,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763389074206,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -105,9 +105,9 @@\n         .filter((o: any) => o.status === 'completed')\r\n         .reduce((sum: number, order: any) => sum + (order.totalPrice || 0), 0);\r\n \r\n       this.stats.completedOrders = orders.filter((o: any) => o.status === 'completed').length;\r\n-      this.stats.pendingOrders = orders.filter((o: any) => o.status === 'pending').length;\r\n+      this.stats.pendingOrders = orders.filter((o: any) => o.status === 'placed').length;\r\n       this.stats.cancelledOrders = orders.filter((o: any) => o.status === 'cancelled').length;\r\n     } catch (error) {\r\n       console.error('Error loading stats:', error);\r\n     }\r\n@@ -274,16 +274,17 @@\n     try {\r\n       const orders = await this.orderService.getAllOrders();\r\n       \r\n       const statusCount = {\r\n-        pending: 0,\r\n+        placed: 0,\r\n         confirmed: 0,\r\n+        ready_for_pickup: 0,\r\n         completed: 0,\r\n         cancelled: 0\r\n       };\r\n \r\n       orders.forEach((order: any) => {\r\n-        const status = order.status || 'pending';\r\n+        const status = order.status || 'placed';\r\n         if (status in statusCount) {\r\n           (statusCount as any)[status]++;\r\n         }\r\n       });\r\n@@ -295,17 +296,18 @@\n           const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n           this.statusChart = new Chart(ctx, {\r\n             type: 'doughnut',\r\n             data: {\r\n-              labels: ['Pending', 'Confirmed', 'Completed', 'Cancelled'],\r\n+              labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n               datasets: [{\r\n                 data: [\r\n-                  statusCount.pending,\r\n+                  statusCount.placed,\r\n                   statusCount.confirmed,\r\n+                  statusCount.ready_for_pickup,\r\n                   statusCount.completed,\r\n                   statusCount.cancelled\r\n                 ],\r\n-                backgroundColor: ['#ff9800', '#2196f3', '#4caf50', '#f44336']\r\n+                backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n               }]\r\n             },\r\n             options: {\r\n               responsive: true,\r\n"
                },
                {
                    "date": 1763638999768,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -64,8 +64,12 @@\n     private toastController: ToastController\r\n   ) {}\r\n \r\n   ngOnInit() {\r\n+    // Don't load here, wait for ionViewDidEnter\r\n+  }\r\n+\r\n+  ionViewDidEnter() {\r\n     this.loadReports();\r\n   }\r\n \r\n   async loadReports() {\r\n@@ -133,12 +137,13 @@\n \r\n       const data = sortedDates.map(date => salesByDate.get(date) || 0);\r\n \r\n       setTimeout(() => {\r\n-        if (this.salesChartRef) {\r\n+        if (this.salesChartRef && this.salesChartRef.nativeElement) {\r\n           if (this.salesChart) this.salesChart.destroy();\r\n           \r\n           const ctx = this.salesChartRef.nativeElement.getContext('2d');\r\n+          if (!ctx) return;\r\n           this.salesChart = new Chart(ctx, {\r\n             type: 'line',\r\n             data: {\r\n               labels: sortedDates,\r\n@@ -183,12 +188,13 @@\n       const categories = Array.from(categoryCount.keys());\r\n       const counts = categories.map(cat => categoryCount.get(cat) || 0);\r\n \r\n       setTimeout(() => {\r\n-        if (this.categoryChartRef) {\r\n+        if (this.categoryChartRef && this.categoryChartRef.nativeElement) {\r\n           if (this.categoryChart) this.categoryChart.destroy();\r\n           \r\n           const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n+          if (!ctx) return;\r\n           this.categoryChart = new Chart(ctx, {\r\n             type: 'pie',\r\n             data: {\r\n               labels: categories,\r\n@@ -235,12 +241,13 @@\n         .sort((a, b) => b.total - a.total)\r\n         .slice(0, 10);\r\n \r\n       setTimeout(() => {\r\n-        if (this.topSellersChartRef) {\r\n+        if (this.topSellersChartRef && this.topSellersChartRef.nativeElement) {\r\n           if (this.topSellersChart) this.topSellersChart.destroy();\r\n           \r\n           const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n+          if (!ctx) return;\r\n           this.topSellersChart = new Chart(ctx, {\r\n             type: 'bar',\r\n             data: {\r\n               labels: topSellers.map(s => s.name),\r\n@@ -289,12 +296,13 @@\n         }\r\n       });\r\n \r\n       setTimeout(() => {\r\n-        if (this.statusChartRef) {\r\n+        if (this.statusChartRef && this.statusChartRef.nativeElement) {\r\n           if (this.statusChart) this.statusChart.destroy();\r\n           \r\n           const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n+          if (!ctx) return;\r\n           this.statusChart = new Chart(ctx, {\r\n             type: 'doughnut',\r\n             data: {\r\n               labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n@@ -331,47 +339,62 @@\n \r\n   async exportPDF() {\r\n     this.loading = true;\r\n     try {\r\n+      // Wait for charts to fully render\r\n+      await new Promise(resolve => setTimeout(resolve, 1000));\r\n+      \r\n       const element = this.reportContent.nativeElement;\r\n+      if (!element) {\r\n+        throw new Error('Report content not found');\r\n+      }\r\n+\r\n       const canvas = await html2canvas(element, {\r\n         scale: 2,\r\n         logging: false,\r\n-        useCORS: true\r\n+        useCORS: true,\r\n+        allowTaint: true,\r\n+        backgroundColor: '#ffffff'\r\n       });\r\n \r\n       const imgData = canvas.toDataURL('image/png');\r\n       const pdf = new jsPDF('p', 'mm', 'a4');\r\n       const imgWidth = 210; // A4 width in mm\r\n+      const pageHeight = 297; // A4 height in mm\r\n       const imgHeight = (canvas.height * imgWidth) / canvas.width;\r\n       \r\n       let heightLeft = imgHeight;\r\n       let position = 0;\r\n \r\n+      // Add first page\r\n       pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n-      heightLeft -= 297; // A4 height\r\n+      heightLeft -= pageHeight;\r\n \r\n-      while (heightLeft >= 0) {\r\n-        position = heightLeft - imgHeight;\r\n+      // Add additional pages if needed\r\n+      while (heightLeft > 0) {\r\n+        position = -pageHeight;\r\n         pdf.addPage();\r\n         pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n-        heightLeft -= 297;\r\n+        heightLeft -= pageHeight;\r\n       }\r\n \r\n-      pdf.save(`CampusMarket-Report-${new Date().toLocaleDateString()}.pdf`);\r\n+      const fileName = `CampusMarket-Report-${new Date().toISOString().split('T')[0]}.pdf`;\r\n+      pdf.save(fileName);\r\n \r\n       const toast = await this.toastController.create({\r\n-        message: 'Report exported successfully!',\r\n+        message: 'ðŸ“„ Report exported successfully!',\r\n         duration: 2000,\r\n-        color: 'success'\r\n+        color: 'success',\r\n+        position: 'top'\r\n       });\r\n       await toast.present();\r\n     } catch (error) {\r\n       console.error('Error exporting PDF:', error);\r\n       const toast = await this.toastController.create({\r\n-        message: 'Failed to export PDF',\r\n+        message: `Failed to export PDF: ${error instanceof Error ? error.message : 'Unknown error'}`,\r\n         duration: 3000,\r\n-        color: 'danger'\r\n+        color: 'danger',\r\n+        position: 'top'\r\n       });\r\n       await toast.present();\r\n     } finally {\r\n       this.loading = false;\r\n"
                },
                {
                    "date": 1763883756136,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,10 +69,19 @@\n   }\r\n \r\n   ionViewDidEnter() {\r\n     this.loadReports();\r\n+    // Force immediate chart rendering\r\n+    setTimeout(() => {\r\n+      this.refreshCharts();\r\n+    }, 500);\r\n   }\r\n \r\n+  private refreshCharts() {\r\n+    // Trigger window resize to force charts to render\r\n+    window.dispatchEvent(new Event('resize'));\r\n+  }\r\n+\r\n   async loadReports() {\r\n     this.loading = true;\r\n     try {\r\n       await Promise.all([\r\n@@ -402,8 +411,12 @@\n   }\r\n \r\n   async refreshReports() {\r\n     await this.loadReports();\r\n+    // Force charts to re-render after data refresh\r\n+    setTimeout(() => {\r\n+      this.refreshCharts();\r\n+    }, 500);\r\n   }\r\n \r\n   ngOnDestroy() {\r\n     if (this.salesChart) this.salesChart.destroy();\r\n"
                },
                {
                    "date": 1763884797361,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,5 +1,5 @@\n-import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\n+import { Component, OnInit, AfterViewInit, ViewChild, ElementRef } from '@angular/core';\r\n import { CommonModule } from '@angular/common';\r\n import { FormsModule } from '@angular/forms';\r\n import { IonicModule, AlertController, ToastController } from '@ionic/angular';\r\n import { OrderService } from 'src/app/services/order.service';\r\n@@ -27,9 +27,9 @@\n   styleUrls: ['./reports.page.scss'],\r\n   standalone: true,\r\n   imports: [CommonModule, FormsModule, IonicModule]\r\n })\r\n-export class ReportsPage implements OnInit {\r\n+export class ReportsPage implements OnInit, AfterViewInit {\r\n   @ViewChild('salesChart') salesChartRef!: ElementRef;\r\n   @ViewChild('categoryChart') categoryChartRef!: ElementRef;\r\n   @ViewChild('topSellersChart') topSellersChartRef!: ElementRef;\r\n   @ViewChild('statusChart') statusChartRef!: ElementRef;\r\n@@ -64,17 +64,25 @@\n     private toastController: ToastController\r\n   ) {}\r\n \r\n   ngOnInit() {\r\n-    // Don't load here, wait for ionViewDidEnter\r\n+    console.log('Reports page initialized');\r\n   }\r\n \r\n+  ngAfterViewInit() {\r\n+    console.log('View initialized, loading reports...');\r\n+    // Small delay to ensure view is fully rendered\r\n+    setTimeout(() => {\r\n+      this.loadReports();\r\n+    }, 100);\r\n+  }\r\n+\r\n   ionViewDidEnter() {\r\n-    this.loadReports();\r\n-    // Force immediate chart rendering\r\n-    setTimeout(() => {\r\n+    console.log('View entered, refreshing charts...');\r\n+    // Refresh charts when returning to page\r\n+    if (this.salesChart || this.categoryChart || this.topSellersChart || this.statusChart) {\r\n       this.refreshCharts();\r\n-    }, 500);\r\n+    }\r\n   }\r\n \r\n   private refreshCharts() {\r\n     // Trigger window resize to force charts to render\r\n@@ -145,14 +153,29 @@\n       );\r\n \r\n       const data = sortedDates.map(date => salesByDate.get(date) || 0);\r\n \r\n+      // If no data, use sample data for demo\r\n+      if (sortedDates.length === 0) {\r\n+        console.warn('No sales data available, using sample data');\r\n+        sortedDates.push('No data');\r\n+        data.push(0);\r\n+      }\r\n+\r\n       setTimeout(() => {\r\n+        console.log('Creating sales chart...', !!this.salesChartRef);\r\n         if (this.salesChartRef && this.salesChartRef.nativeElement) {\r\n-          if (this.salesChart) this.salesChart.destroy();\r\n+          if (this.salesChart) {\r\n+            console.log('Destroying existing sales chart');\r\n+            this.salesChart.destroy();\r\n+          }\r\n           \r\n           const ctx = this.salesChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) return;\r\n+          if (!ctx) {\r\n+            console.error('Failed to get 2d context for sales chart');\r\n+            return;\r\n+          }\r\n+          console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n           this.salesChart = new Chart(ctx, {\r\n             type: 'line',\r\n             data: {\r\n               labels: sortedDates,\r\n@@ -196,14 +219,29 @@\n \r\n       const categories = Array.from(categoryCount.keys());\r\n       const counts = categories.map(cat => categoryCount.get(cat) || 0);\r\n \r\n+      // If no data, use sample data for demo\r\n+      if (categories.length === 0) {\r\n+        console.warn('No category data available, using sample data');\r\n+        categories.push('No products');\r\n+        counts.push(0);\r\n+      }\r\n+\r\n       setTimeout(() => {\r\n+        console.log('Creating category chart...', !!this.categoryChartRef);\r\n         if (this.categoryChartRef && this.categoryChartRef.nativeElement) {\r\n-          if (this.categoryChart) this.categoryChart.destroy();\r\n+          if (this.categoryChart) {\r\n+            console.log('Destroying existing category chart');\r\n+            this.categoryChart.destroy();\r\n+          }\r\n           \r\n           const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) return;\r\n+          if (!ctx) {\r\n+            console.error('Failed to get 2d context for category chart');\r\n+            return;\r\n+          }\r\n+          console.log('Rendering category chart with', categories.length, 'categories');\r\n           this.categoryChart = new Chart(ctx, {\r\n             type: 'pie',\r\n             data: {\r\n               labels: categories,\r\n@@ -249,14 +287,28 @@\n       const topSellers = Array.from(salesBySeller.values())\r\n         .sort((a, b) => b.total - a.total)\r\n         .slice(0, 10);\r\n \r\n+      // If no data, use sample data for demo\r\n+      if (topSellers.length === 0) {\r\n+        console.warn('No seller data available, using sample data');\r\n+        topSellers.push({ name: 'No sellers', total: 0 });\r\n+      }\r\n+\r\n       setTimeout(() => {\r\n+        console.log('Creating top sellers chart...', !!this.topSellersChartRef);\r\n         if (this.topSellersChartRef && this.topSellersChartRef.nativeElement) {\r\n-          if (this.topSellersChart) this.topSellersChart.destroy();\r\n+          if (this.topSellersChart) {\r\n+            console.log('Destroying existing top sellers chart');\r\n+            this.topSellersChart.destroy();\r\n+          }\r\n           \r\n           const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) return;\r\n+          if (!ctx) {\r\n+            console.error('Failed to get 2d context for top sellers chart');\r\n+            return;\r\n+          }\r\n+          console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n           this.topSellersChart = new Chart(ctx, {\r\n             type: 'bar',\r\n             data: {\r\n               labels: topSellers.map(s => s.name),\r\n@@ -305,13 +357,21 @@\n         }\r\n       });\r\n \r\n       setTimeout(() => {\r\n+        console.log('Creating status chart...', !!this.statusChartRef);\r\n         if (this.statusChartRef && this.statusChartRef.nativeElement) {\r\n-          if (this.statusChart) this.statusChart.destroy();\r\n+          if (this.statusChart) {\r\n+            console.log('Destroying existing status chart');\r\n+            this.statusChart.destroy();\r\n+          }\r\n           \r\n           const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) return;\r\n+          if (!ctx) {\r\n+            console.error('Failed to get 2d context for status chart');\r\n+            return;\r\n+          }\r\n+          console.log('Rendering status chart');\r\n           this.statusChart = new Chart(ctx, {\r\n             type: 'doughnut',\r\n             data: {\r\n               labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n"
                },
                {
                    "date": 1764140857273,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,20 +69,28 @@\n   }\r\n \r\n   ngAfterViewInit() {\r\n     console.log('View initialized, loading reports...');\r\n-    // Small delay to ensure view is fully rendered\r\n+    // Delay to ensure DOM is fully ready\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 100);\r\n+    }, 300);\r\n   }\r\n \r\n+  ionViewWillEnter() {\r\n+    console.log('View will enter...');\r\n+    // Load reports fresh when entering the page\r\n+    setTimeout(() => {\r\n+      this.loadReports();\r\n+    }, 300);\r\n+  }\r\n+\r\n   ionViewDidEnter() {\r\n     console.log('View entered, refreshing charts...');\r\n     // Refresh charts when returning to page\r\n-    if (this.salesChart || this.categoryChart || this.topSellersChart || this.statusChart) {\r\n+    setTimeout(() => {\r\n       this.refreshCharts();\r\n-    }\r\n+    }, 500);\r\n   }\r\n \r\n   private refreshCharts() {\r\n     // Trigger window resize to force charts to render\r\n@@ -162,47 +170,58 @@\n       }\r\n \r\n       setTimeout(() => {\r\n         console.log('Creating sales chart...', !!this.salesChartRef);\r\n-        if (this.salesChartRef && this.salesChartRef.nativeElement) {\r\n-          if (this.salesChart) {\r\n-            console.log('Destroying existing sales chart');\r\n-            this.salesChart.destroy();\r\n-          }\r\n-          \r\n-          const ctx = this.salesChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) {\r\n-            console.error('Failed to get 2d context for sales chart');\r\n-            return;\r\n-          }\r\n-          console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n-          this.salesChart = new Chart(ctx, {\r\n-            type: 'line',\r\n-            data: {\r\n-              labels: sortedDates,\r\n-              datasets: [{\r\n-                label: 'Sales (â‚±)',\r\n-                data: data,\r\n-                borderColor: '#ffc107',\r\n-                backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n-                tension: 0.4,\r\n-                fill: true\r\n-              }]\r\n+        if (!this.salesChartRef || !this.salesChartRef.nativeElement) {\r\n+          console.error('Sales chart canvas not found');\r\n+          return;\r\n+        }\r\n+        \r\n+        if (this.salesChart) {\r\n+          console.log('Destroying existing sales chart');\r\n+          this.salesChart.destroy();\r\n+          this.salesChart = null;\r\n+        }\r\n+        \r\n+        const canvas = this.salesChartRef.nativeElement;\r\n+        const ctx = canvas.getContext('2d');\r\n+        if (!ctx) {\r\n+          console.error('Failed to get 2d context for sales chart');\r\n+          return;\r\n+        }\r\n+        \r\n+        console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n+        this.salesChart = new Chart(ctx, {\r\n+          type: 'line',\r\n+          data: {\r\n+            labels: sortedDates,\r\n+            datasets: [{\r\n+              label: 'Sales (â‚±)',\r\n+              data: data,\r\n+              borderColor: '#ffc107',\r\n+              backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n+              tension: 0.4,\r\n+              fill: true\r\n+            }]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: { display: true },\r\n+              title: { \r\n+                display: true, \r\n+                text: 'Sales Over Time',\r\n+                font: { size: 16, weight: 'bold' }\r\n+              }\r\n             },\r\n-            options: {\r\n-              responsive: true,\r\n-              maintainAspectRatio: false,\r\n-              plugins: {\r\n-                legend: { display: true },\r\n-                title: { display: true, text: 'Sales Over Time' }\r\n-              },\r\n-              scales: {\r\n-                y: { beginAtZero: true }\r\n-              }\r\n+            scales: {\r\n+              y: { beginAtZero: true }\r\n             }\r\n-          });\r\n-        }\r\n-      }, 100);\r\n+          }\r\n+        });\r\n+        console.log('Sales chart created successfully');\r\n+      }, 200);\r\n     } catch (error) {\r\n       console.error('Error loading sales chart:', error);\r\n     }\r\n   }\r\n@@ -228,42 +247,53 @@\n       }\r\n \r\n       setTimeout(() => {\r\n         console.log('Creating category chart...', !!this.categoryChartRef);\r\n-        if (this.categoryChartRef && this.categoryChartRef.nativeElement) {\r\n-          if (this.categoryChart) {\r\n-            console.log('Destroying existing category chart');\r\n-            this.categoryChart.destroy();\r\n-          }\r\n-          \r\n-          const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) {\r\n-            console.error('Failed to get 2d context for category chart');\r\n-            return;\r\n-          }\r\n-          console.log('Rendering category chart with', categories.length, 'categories');\r\n-          this.categoryChart = new Chart(ctx, {\r\n-            type: 'pie',\r\n-            data: {\r\n-              labels: categories,\r\n-              datasets: [{\r\n-                data: counts,\r\n-                backgroundColor: [\r\n-                  '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n-                ]\r\n-              }]\r\n-            },\r\n-            options: {\r\n-              responsive: true,\r\n-              maintainAspectRatio: false,\r\n-              plugins: {\r\n-                legend: { position: 'right' },\r\n-                title: { display: true, text: 'Products by Category' }\r\n+        if (!this.categoryChartRef || !this.categoryChartRef.nativeElement) {\r\n+          console.error('Category chart canvas not found');\r\n+          return;\r\n+        }\r\n+        \r\n+        if (this.categoryChart) {\r\n+          console.log('Destroying existing category chart');\r\n+          this.categoryChart.destroy();\r\n+          this.categoryChart = null;\r\n+        }\r\n+        \r\n+        const canvas = this.categoryChartRef.nativeElement;\r\n+        const ctx = canvas.getContext('2d');\r\n+        if (!ctx) {\r\n+          console.error('Failed to get 2d context for category chart');\r\n+          return;\r\n+        }\r\n+        \r\n+        console.log('Rendering category chart with', categories.length, 'categories');\r\n+        this.categoryChart = new Chart(ctx, {\r\n+          type: 'pie',\r\n+          data: {\r\n+            labels: categories,\r\n+            datasets: [{\r\n+              data: counts,\r\n+              backgroundColor: [\r\n+                '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n+              ]\r\n+            }]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: { position: 'right' },\r\n+              title: { \r\n+                display: true, \r\n+                text: 'Products by Category',\r\n+                font: { size: 16, weight: 'bold' }\r\n               }\r\n             }\r\n-          });\r\n-        }\r\n-      }, 100);\r\n+          }\r\n+        });\r\n+        console.log('Category chart created successfully');\r\n+      }, 200);\r\n     } catch (error) {\r\n       console.error('Error loading category chart:', error);\r\n     }\r\n   }\r\n@@ -295,45 +325,56 @@\n       }\r\n \r\n       setTimeout(() => {\r\n         console.log('Creating top sellers chart...', !!this.topSellersChartRef);\r\n-        if (this.topSellersChartRef && this.topSellersChartRef.nativeElement) {\r\n-          if (this.topSellersChart) {\r\n-            console.log('Destroying existing top sellers chart');\r\n-            this.topSellersChart.destroy();\r\n-          }\r\n-          \r\n-          const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) {\r\n-            console.error('Failed to get 2d context for top sellers chart');\r\n-            return;\r\n-          }\r\n-          console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n-          this.topSellersChart = new Chart(ctx, {\r\n-            type: 'bar',\r\n-            data: {\r\n-              labels: topSellers.map(s => s.name),\r\n-              datasets: [{\r\n-                label: 'Sales (â‚±)',\r\n-                data: topSellers.map(s => s.total),\r\n-                backgroundColor: '#4caf50'\r\n-              }]\r\n+        if (!this.topSellersChartRef || !this.topSellersChartRef.nativeElement) {\r\n+          console.error('Top sellers chart canvas not found');\r\n+          return;\r\n+        }\r\n+        \r\n+        if (this.topSellersChart) {\r\n+          console.log('Destroying existing top sellers chart');\r\n+          this.topSellersChart.destroy();\r\n+          this.topSellersChart = null;\r\n+        }\r\n+        \r\n+        const canvas = this.topSellersChartRef.nativeElement;\r\n+        const ctx = canvas.getContext('2d');\r\n+        if (!ctx) {\r\n+          console.error('Failed to get 2d context for top sellers chart');\r\n+          return;\r\n+        }\r\n+        \r\n+        console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n+        this.topSellersChart = new Chart(ctx, {\r\n+          type: 'bar',\r\n+          data: {\r\n+            labels: topSellers.map(s => s.name),\r\n+            datasets: [{\r\n+              label: 'Sales (â‚±)',\r\n+              data: topSellers.map(s => s.total),\r\n+              backgroundColor: '#4caf50'\r\n+            }]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            indexAxis: 'y',\r\n+            plugins: {\r\n+              legend: { display: false },\r\n+              title: { \r\n+                display: true, \r\n+                text: 'Top 10 Sellers',\r\n+                font: { size: 16, weight: 'bold' }\r\n+              }\r\n             },\r\n-            options: {\r\n-              responsive: true,\r\n-              maintainAspectRatio: false,\r\n-              indexAxis: 'y',\r\n-              plugins: {\r\n-                legend: { display: false },\r\n-                title: { display: true, text: 'Top 10 Sellers' }\r\n-              },\r\n-              scales: {\r\n-                x: { beginAtZero: true }\r\n-              }\r\n+            scales: {\r\n+              x: { beginAtZero: true }\r\n             }\r\n-          });\r\n-        }\r\n-      }, 100);\r\n+          }\r\n+        });\r\n+        console.log('Top sellers chart created successfully');\r\n+      }, 200);\r\n     } catch (error) {\r\n       console.error('Error loading top sellers chart:', error);\r\n     }\r\n   }\r\n@@ -358,46 +399,57 @@\n       });\r\n \r\n       setTimeout(() => {\r\n         console.log('Creating status chart...', !!this.statusChartRef);\r\n-        if (this.statusChartRef && this.statusChartRef.nativeElement) {\r\n-          if (this.statusChart) {\r\n-            console.log('Destroying existing status chart');\r\n-            this.statusChart.destroy();\r\n-          }\r\n-          \r\n-          const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n-          if (!ctx) {\r\n-            console.error('Failed to get 2d context for status chart');\r\n-            return;\r\n-          }\r\n-          console.log('Rendering status chart');\r\n-          this.statusChart = new Chart(ctx, {\r\n-            type: 'doughnut',\r\n-            data: {\r\n-              labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n-              datasets: [{\r\n-                data: [\r\n-                  statusCount.placed,\r\n-                  statusCount.confirmed,\r\n-                  statusCount.ready_for_pickup,\r\n-                  statusCount.completed,\r\n-                  statusCount.cancelled\r\n-                ],\r\n-                backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n-              }]\r\n-            },\r\n-            options: {\r\n-              responsive: true,\r\n-              maintainAspectRatio: false,\r\n-              plugins: {\r\n-                legend: { position: 'bottom' },\r\n-                title: { display: true, text: 'Order Status Breakdown' }\r\n+        if (!this.statusChartRef || !this.statusChartRef.nativeElement) {\r\n+          console.error('Status chart canvas not found');\r\n+          return;\r\n+        }\r\n+        \r\n+        if (this.statusChart) {\r\n+          console.log('Destroying existing status chart');\r\n+          this.statusChart.destroy();\r\n+          this.statusChart = null;\r\n+        }\r\n+        \r\n+        const canvas = this.statusChartRef.nativeElement;\r\n+        const ctx = canvas.getContext('2d');\r\n+        if (!ctx) {\r\n+          console.error('Failed to get 2d context for status chart');\r\n+          return;\r\n+        }\r\n+        \r\n+        console.log('Rendering status chart');\r\n+        this.statusChart = new Chart(ctx, {\r\n+          type: 'doughnut',\r\n+          data: {\r\n+            labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n+            datasets: [{\r\n+              data: [\r\n+                statusCount.placed,\r\n+                statusCount.confirmed,\r\n+                statusCount.ready_for_pickup,\r\n+                statusCount.completed,\r\n+                statusCount.cancelled\r\n+              ],\r\n+              backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n+            }]\r\n+          },\r\n+          options: {\r\n+            responsive: true,\r\n+            maintainAspectRatio: false,\r\n+            plugins: {\r\n+              legend: { position: 'bottom' },\r\n+              title: { \r\n+                display: true, \r\n+                text: 'Order Status Breakdown',\r\n+                font: { size: 16, weight: 'bold' }\r\n               }\r\n             }\r\n-          });\r\n-        }\r\n-      }, 100);\r\n+          }\r\n+        });\r\n+        console.log('Status chart created successfully');\r\n+      }, 200);\r\n     } catch (error) {\r\n       console.error('Error loading status chart:', error);\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1764141014824,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,30 +69,20 @@\n   }\r\n \r\n   ngAfterViewInit() {\r\n     console.log('View initialized, loading reports...');\r\n-    // Delay to ensure DOM is fully ready\r\n-    setTimeout(() => {\r\n-      this.loadReports();\r\n-    }, 300);\r\n+    // Immediate load without delay\r\n+    this.loadReports();\r\n   }\r\n \r\n-  ionViewWillEnter() {\r\n-    console.log('View will enter...');\r\n-    // Load reports fresh when entering the page\r\n-    setTimeout(() => {\r\n+  ionViewDidEnter() {\r\n+    console.log('View entered, ensuring charts render...');\r\n+    // Force reload and render on each view enter\r\n+    if (!this.loading) {\r\n       this.loadReports();\r\n-    }, 300);\r\n+    }\r\n   }\r\n \r\n-  ionViewDidEnter() {\r\n-    console.log('View entered, refreshing charts...');\r\n-    // Refresh charts when returning to page\r\n-    setTimeout(() => {\r\n-      this.refreshCharts();\r\n-    }, 500);\r\n-  }\r\n-\r\n   private refreshCharts() {\r\n     // Trigger window resize to force charts to render\r\n     window.dispatchEvent(new Event('resize'));\r\n   }\r\n@@ -168,60 +158,60 @@\n         sortedDates.push('No data');\r\n         data.push(0);\r\n       }\r\n \r\n-      setTimeout(() => {\r\n-        console.log('Creating sales chart...', !!this.salesChartRef);\r\n-        if (!this.salesChartRef || !this.salesChartRef.nativeElement) {\r\n-          console.error('Sales chart canvas not found');\r\n-          return;\r\n-        }\r\n-        \r\n-        if (this.salesChart) {\r\n-          console.log('Destroying existing sales chart');\r\n-          this.salesChart.destroy();\r\n-          this.salesChart = null;\r\n-        }\r\n-        \r\n-        const canvas = this.salesChartRef.nativeElement;\r\n-        const ctx = canvas.getContext('2d');\r\n-        if (!ctx) {\r\n-          console.error('Failed to get 2d context for sales chart');\r\n-          return;\r\n-        }\r\n-        \r\n-        console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n-        this.salesChart = new Chart(ctx, {\r\n-          type: 'line',\r\n-          data: {\r\n-            labels: sortedDates,\r\n-            datasets: [{\r\n-              label: 'Sales (â‚±)',\r\n-              data: data,\r\n-              borderColor: '#ffc107',\r\n-              backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n-              tension: 0.4,\r\n-              fill: true\r\n-            }]\r\n+      console.log('Creating sales chart...', !!this.salesChartRef);\r\n+      if (!this.salesChartRef || !this.salesChartRef.nativeElement) {\r\n+        console.error('Sales chart canvas not found');\r\n+        return;\r\n+      }\r\n+      \r\n+      if (this.salesChart) {\r\n+        console.log('Destroying existing sales chart');\r\n+        this.salesChart.destroy();\r\n+        this.salesChart = null;\r\n+      }\r\n+      \r\n+      const canvas = this.salesChartRef.nativeElement;\r\n+      canvas.width = canvas.offsetWidth;\r\n+      canvas.height = 300;\r\n+      const ctx = canvas.getContext('2d');\r\n+      if (!ctx) {\r\n+        console.error('Failed to get 2d context for sales chart');\r\n+        return;\r\n+      }\r\n+      \r\n+      console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n+      this.salesChart = new Chart(ctx, {\r\n+        type: 'line',\r\n+        data: {\r\n+          labels: sortedDates,\r\n+          datasets: [{\r\n+            label: 'Sales (â‚±)',\r\n+            data: data,\r\n+            borderColor: '#ffc107',\r\n+            backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n+            tension: 0.4,\r\n+            fill: true\r\n+          }]\r\n+        },\r\n+        options: {\r\n+          responsive: true,\r\n+          maintainAspectRatio: false,\r\n+          plugins: {\r\n+            legend: { display: true },\r\n+            title: { \r\n+              display: true, \r\n+              text: 'Sales Over Time',\r\n+              font: { size: 16, weight: 'bold' }\r\n+            }\r\n           },\r\n-          options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            plugins: {\r\n-              legend: { display: true },\r\n-              title: { \r\n-                display: true, \r\n-                text: 'Sales Over Time',\r\n-                font: { size: 16, weight: 'bold' }\r\n-              }\r\n-            },\r\n-            scales: {\r\n-              y: { beginAtZero: true }\r\n-            }\r\n+          scales: {\r\n+            y: { beginAtZero: true }\r\n           }\r\n-        });\r\n-        console.log('Sales chart created successfully');\r\n-      }, 200);\r\n+        }\r\n+      });\r\n+      console.log('Sales chart created successfully');\r\n     } catch (error) {\r\n       console.error('Error loading sales chart:', error);\r\n     }\r\n   }\r\n@@ -245,55 +235,55 @@\n         categories.push('No products');\r\n         counts.push(0);\r\n       }\r\n \r\n-      setTimeout(() => {\r\n-        console.log('Creating category chart...', !!this.categoryChartRef);\r\n-        if (!this.categoryChartRef || !this.categoryChartRef.nativeElement) {\r\n-          console.error('Category chart canvas not found');\r\n-          return;\r\n-        }\r\n-        \r\n-        if (this.categoryChart) {\r\n-          console.log('Destroying existing category chart');\r\n-          this.categoryChart.destroy();\r\n-          this.categoryChart = null;\r\n-        }\r\n-        \r\n-        const canvas = this.categoryChartRef.nativeElement;\r\n-        const ctx = canvas.getContext('2d');\r\n-        if (!ctx) {\r\n-          console.error('Failed to get 2d context for category chart');\r\n-          return;\r\n-        }\r\n-        \r\n-        console.log('Rendering category chart with', categories.length, 'categories');\r\n-        this.categoryChart = new Chart(ctx, {\r\n-          type: 'pie',\r\n-          data: {\r\n-            labels: categories,\r\n-            datasets: [{\r\n-              data: counts,\r\n-              backgroundColor: [\r\n-                '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n-              ]\r\n-            }]\r\n-          },\r\n-          options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            plugins: {\r\n-              legend: { position: 'right' },\r\n-              title: { \r\n-                display: true, \r\n-                text: 'Products by Category',\r\n-                font: { size: 16, weight: 'bold' }\r\n-              }\r\n+      console.log('Creating category chart...', !!this.categoryChartRef);\r\n+      if (!this.categoryChartRef || !this.categoryChartRef.nativeElement) {\r\n+        console.error('Category chart canvas not found');\r\n+        return;\r\n+      }\r\n+      \r\n+      if (this.categoryChart) {\r\n+        console.log('Destroying existing category chart');\r\n+        this.categoryChart.destroy();\r\n+        this.categoryChart = null;\r\n+      }\r\n+      \r\n+      const canvas = this.categoryChartRef.nativeElement;\r\n+      canvas.width = canvas.offsetWidth;\r\n+      canvas.height = 300;\r\n+      const ctx = canvas.getContext('2d');\r\n+      if (!ctx) {\r\n+        console.error('Failed to get 2d context for category chart');\r\n+        return;\r\n+      }\r\n+      \r\n+      console.log('Rendering category chart with', categories.length, 'categories');\r\n+      this.categoryChart = new Chart(ctx, {\r\n+        type: 'pie',\r\n+        data: {\r\n+          labels: categories,\r\n+          datasets: [{\r\n+            data: counts,\r\n+            backgroundColor: [\r\n+              '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n+            ]\r\n+          }]\r\n+        },\r\n+        options: {\r\n+          responsive: true,\r\n+          maintainAspectRatio: false,\r\n+          plugins: {\r\n+            legend: { position: 'right' },\r\n+            title: { \r\n+              display: true, \r\n+              text: 'Products by Category',\r\n+              font: { size: 16, weight: 'bold' }\r\n             }\r\n           }\r\n-        });\r\n-        console.log('Category chart created successfully');\r\n-      }, 200);\r\n+        }\r\n+      });\r\n+      console.log('Category chart created successfully');\r\n     } catch (error) {\r\n       console.error('Error loading category chart:', error);\r\n     }\r\n   }\r\n@@ -323,58 +313,58 @@\n         console.warn('No seller data available, using sample data');\r\n         topSellers.push({ name: 'No sellers', total: 0 });\r\n       }\r\n \r\n-      setTimeout(() => {\r\n-        console.log('Creating top sellers chart...', !!this.topSellersChartRef);\r\n-        if (!this.topSellersChartRef || !this.topSellersChartRef.nativeElement) {\r\n-          console.error('Top sellers chart canvas not found');\r\n-          return;\r\n-        }\r\n-        \r\n-        if (this.topSellersChart) {\r\n-          console.log('Destroying existing top sellers chart');\r\n-          this.topSellersChart.destroy();\r\n-          this.topSellersChart = null;\r\n-        }\r\n-        \r\n-        const canvas = this.topSellersChartRef.nativeElement;\r\n-        const ctx = canvas.getContext('2d');\r\n-        if (!ctx) {\r\n-          console.error('Failed to get 2d context for top sellers chart');\r\n-          return;\r\n-        }\r\n-        \r\n-        console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n-        this.topSellersChart = new Chart(ctx, {\r\n-          type: 'bar',\r\n-          data: {\r\n-            labels: topSellers.map(s => s.name),\r\n-            datasets: [{\r\n-              label: 'Sales (â‚±)',\r\n-              data: topSellers.map(s => s.total),\r\n-              backgroundColor: '#4caf50'\r\n-            }]\r\n+      console.log('Creating top sellers chart...', !!this.topSellersChartRef);\r\n+      if (!this.topSellersChartRef || !this.topSellersChartRef.nativeElement) {\r\n+        console.error('Top sellers chart canvas not found');\r\n+        return;\r\n+      }\r\n+      \r\n+      if (this.topSellersChart) {\r\n+        console.log('Destroying existing top sellers chart');\r\n+        this.topSellersChart.destroy();\r\n+        this.topSellersChart = null;\r\n+      }\r\n+      \r\n+      const canvas = this.topSellersChartRef.nativeElement;\r\n+      canvas.width = canvas.offsetWidth;\r\n+      canvas.height = 300;\r\n+      const ctx = canvas.getContext('2d');\r\n+      if (!ctx) {\r\n+        console.error('Failed to get 2d context for top sellers chart');\r\n+        return;\r\n+      }\r\n+      \r\n+      console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n+      this.topSellersChart = new Chart(ctx, {\r\n+        type: 'bar',\r\n+        data: {\r\n+          labels: topSellers.map(s => s.name),\r\n+          datasets: [{\r\n+            label: 'Sales (â‚±)',\r\n+            data: topSellers.map(s => s.total),\r\n+            backgroundColor: '#4caf50'\r\n+          }]\r\n+        },\r\n+        options: {\r\n+          responsive: true,\r\n+          maintainAspectRatio: false,\r\n+          indexAxis: 'y',\r\n+          plugins: {\r\n+            legend: { display: false },\r\n+            title: { \r\n+              display: true, \r\n+              text: 'Top 10 Sellers',\r\n+              font: { size: 16, weight: 'bold' }\r\n+            }\r\n           },\r\n-          options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            indexAxis: 'y',\r\n-            plugins: {\r\n-              legend: { display: false },\r\n-              title: { \r\n-                display: true, \r\n-                text: 'Top 10 Sellers',\r\n-                font: { size: 16, weight: 'bold' }\r\n-              }\r\n-            },\r\n-            scales: {\r\n-              x: { beginAtZero: true }\r\n-            }\r\n+          scales: {\r\n+            x: { beginAtZero: true }\r\n           }\r\n-        });\r\n-        console.log('Top sellers chart created successfully');\r\n-      }, 200);\r\n+        }\r\n+      });\r\n+      console.log('Top sellers chart created successfully');\r\n     } catch (error) {\r\n       console.error('Error loading top sellers chart:', error);\r\n     }\r\n   }\r\n@@ -397,59 +387,59 @@\n           (statusCount as any)[status]++;\r\n         }\r\n       });\r\n \r\n-      setTimeout(() => {\r\n-        console.log('Creating status chart...', !!this.statusChartRef);\r\n-        if (!this.statusChartRef || !this.statusChartRef.nativeElement) {\r\n-          console.error('Status chart canvas not found');\r\n-          return;\r\n-        }\r\n-        \r\n-        if (this.statusChart) {\r\n-          console.log('Destroying existing status chart');\r\n-          this.statusChart.destroy();\r\n-          this.statusChart = null;\r\n-        }\r\n-        \r\n-        const canvas = this.statusChartRef.nativeElement;\r\n-        const ctx = canvas.getContext('2d');\r\n-        if (!ctx) {\r\n-          console.error('Failed to get 2d context for status chart');\r\n-          return;\r\n-        }\r\n-        \r\n-        console.log('Rendering status chart');\r\n-        this.statusChart = new Chart(ctx, {\r\n-          type: 'doughnut',\r\n-          data: {\r\n-            labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n-            datasets: [{\r\n-              data: [\r\n-                statusCount.placed,\r\n-                statusCount.confirmed,\r\n-                statusCount.ready_for_pickup,\r\n-                statusCount.completed,\r\n-                statusCount.cancelled\r\n-              ],\r\n-              backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n-            }]\r\n-          },\r\n-          options: {\r\n-            responsive: true,\r\n-            maintainAspectRatio: false,\r\n-            plugins: {\r\n-              legend: { position: 'bottom' },\r\n-              title: { \r\n-                display: true, \r\n-                text: 'Order Status Breakdown',\r\n-                font: { size: 16, weight: 'bold' }\r\n-              }\r\n+      console.log('Creating status chart...', !!this.statusChartRef);\r\n+      if (!this.statusChartRef || !this.statusChartRef.nativeElement) {\r\n+        console.error('Status chart canvas not found');\r\n+        return;\r\n+      }\r\n+      \r\n+      if (this.statusChart) {\r\n+        console.log('Destroying existing status chart');\r\n+        this.statusChart.destroy();\r\n+        this.statusChart = null;\r\n+      }\r\n+      \r\n+      const canvas = this.statusChartRef.nativeElement;\r\n+      canvas.width = canvas.offsetWidth;\r\n+      canvas.height = 300;\r\n+      const ctx = canvas.getContext('2d');\r\n+      if (!ctx) {\r\n+        console.error('Failed to get 2d context for status chart');\r\n+        return;\r\n+      }\r\n+      \r\n+      console.log('Rendering status chart');\r\n+      this.statusChart = new Chart(ctx, {\r\n+        type: 'doughnut',\r\n+        data: {\r\n+          labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n+          datasets: [{\r\n+            data: [\r\n+              statusCount.placed,\r\n+              statusCount.confirmed,\r\n+              statusCount.ready_for_pickup,\r\n+              statusCount.completed,\r\n+              statusCount.cancelled\r\n+            ],\r\n+            backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n+          }]\r\n+        },\r\n+        options: {\r\n+          responsive: true,\r\n+          maintainAspectRatio: false,\r\n+          plugins: {\r\n+            legend: { position: 'bottom' },\r\n+            title: { \r\n+              display: true, \r\n+              text: 'Order Status Breakdown',\r\n+              font: { size: 16, weight: 'bold' }\r\n             }\r\n           }\r\n-        });\r\n-        console.log('Status chart created successfully');\r\n-      }, 200);\r\n+        }\r\n+      });\r\n+      console.log('Status chart created successfully');\r\n     } catch (error) {\r\n       console.error('Error loading status chart:', error);\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1764510303534,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -179,35 +179,60 @@\n         console.error('Failed to get 2d context for sales chart');\r\n         return;\r\n       }\r\n       \r\n+      // Set white background\r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n+      \r\n       console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n       this.salesChart = new Chart(ctx, {\r\n         type: 'line',\r\n         data: {\r\n           labels: sortedDates,\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n             data: data,\r\n-            borderColor: '#ffc107',\r\n-            backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n+            borderColor: '#2196f3',\r\n+            backgroundColor: 'rgba(33, 150, 243, 0.2)',\r\n+            borderWidth: 3,\r\n+            pointBackgroundColor: '#2196f3',\r\n+            pointBorderColor: '#fff',\r\n+            pointBorderWidth: 2,\r\n+            pointRadius: 5,\r\n+            pointHoverRadius: 7,\r\n             tension: 0.4,\r\n             fill: true\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           plugins: {\r\n-            legend: { display: true },\r\n+            legend: { \r\n+              display: true,\r\n+              labels: {\r\n+                color: '#000',\r\n+                font: { size: 12 }\r\n+              }\r\n+            },\r\n             title: { \r\n               display: true, \r\n               text: 'Sales Over Time',\r\n+              color: '#000',\r\n               font: { size: 16, weight: 'bold' }\r\n             }\r\n           },\r\n           scales: {\r\n-            y: { beginAtZero: true }\r\n+            y: { \r\n+              beginAtZero: true,\r\n+              ticks: { color: '#000' },\r\n+              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+            },\r\n+            x: {\r\n+              ticks: { color: '#000' },\r\n+              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+            }\r\n           }\r\n         }\r\n       });\r\n       console.log('Sales chart created successfully');\r\n@@ -256,28 +281,42 @@\n         console.error('Failed to get 2d context for category chart');\r\n         return;\r\n       }\r\n       \r\n+      // Set white background\r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n+      \r\n       console.log('Rendering category chart with', categories.length, 'categories');\r\n       this.categoryChart = new Chart(ctx, {\r\n         type: 'pie',\r\n         data: {\r\n           labels: categories,\r\n           datasets: [{\r\n             data: counts,\r\n             backgroundColor: [\r\n-              '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n-            ]\r\n+              '#ff6384', '#36a2eb', '#ffce56', '#4bc0c0', '#9966ff', '#ff9f40', '#ff6384', '#c9cbcf'\r\n+            ],\r\n+            borderColor: '#fff',\r\n+            borderWidth: 2\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           plugins: {\r\n-            legend: { position: 'right' },\r\n+            legend: { \r\n+              position: 'right',\r\n+              labels: {\r\n+                color: '#000',\r\n+                font: { size: 11 },\r\n+                padding: 10\r\n+              }\r\n+            },\r\n             title: { \r\n               display: true, \r\n               text: 'Products by Category',\r\n+              color: '#000',\r\n               font: { size: 16, weight: 'bold' }\r\n             }\r\n           }\r\n         }\r\n@@ -334,17 +373,29 @@\n         console.error('Failed to get 2d context for top sellers chart');\r\n         return;\r\n       }\r\n       \r\n+      // Set white background\r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n+      \r\n+      // Generate gradient colors for bars\r\n+      const barColors = topSellers.map((_, index) => {\r\n+        const hue = (index * 360 / topSellers.length);\r\n+        return `hsl(${hue}, 70%, 50%)`;\r\n+      });\r\n+      \r\n       console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n       this.topSellersChart = new Chart(ctx, {\r\n         type: 'bar',\r\n         data: {\r\n           labels: topSellers.map(s => s.name),\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n             data: topSellers.map(s => s.total),\r\n-            backgroundColor: '#4caf50'\r\n+            backgroundColor: barColors,\r\n+            borderColor: barColors,\r\n+            borderWidth: 1\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n@@ -354,13 +405,22 @@\n             legend: { display: false },\r\n             title: { \r\n               display: true, \r\n               text: 'Top 10 Sellers',\r\n+              color: '#000',\r\n               font: { size: 16, weight: 'bold' }\r\n             }\r\n           },\r\n           scales: {\r\n-            x: { beginAtZero: true }\r\n+            x: { \r\n+              beginAtZero: true,\r\n+              ticks: { color: '#000' },\r\n+              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+            },\r\n+            y: {\r\n+              ticks: { color: '#000' },\r\n+              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+            }\r\n           }\r\n         }\r\n       });\r\n       console.log('Top sellers chart created successfully');\r\n@@ -408,8 +468,12 @@\n         console.error('Failed to get 2d context for status chart');\r\n         return;\r\n       }\r\n       \r\n+      // Set white background\r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n+      \r\n       console.log('Rendering status chart');\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n@@ -421,19 +485,30 @@\n               statusCount.ready_for_pickup,\r\n               statusCount.completed,\r\n               statusCount.cancelled\r\n             ],\r\n-            backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336']\r\n+            backgroundColor: ['#ffa726', '#42a5f5', '#ab47bc', '#66bb6a', '#ef5350'],\r\n+            borderColor: '#fff',\r\n+            borderWidth: 3,\r\n+            hoverOffset: 10\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           plugins: {\r\n-            legend: { position: 'bottom' },\r\n+            legend: { \r\n+              position: 'bottom',\r\n+              labels: {\r\n+                color: '#000',\r\n+                font: { size: 11 },\r\n+                padding: 15\r\n+              }\r\n+            },\r\n             title: { \r\n               display: true, \r\n               text: 'Order Status Breakdown',\r\n+              color: '#000',\r\n               font: { size: 16, weight: 'bold' }\r\n             }\r\n           }\r\n         }\r\n"
                },
                {
                    "date": 1764510770012,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -69,18 +69,22 @@\n   }\r\n \r\n   ngAfterViewInit() {\r\n     console.log('View initialized, loading reports...');\r\n-    // Immediate load without delay\r\n-    this.loadReports();\r\n+    // Delay to ensure canvas elements are fully rendered\r\n+    setTimeout(() => {\r\n+      this.loadReports();\r\n+    }, 500);\r\n   }\r\n \r\n   ionViewDidEnter() {\r\n     console.log('View entered, ensuring charts render...');\r\n-    // Force reload and render on each view enter\r\n-    if (!this.loading) {\r\n-      this.loadReports();\r\n-    }\r\n+    // Reload charts when view is entered\r\n+    setTimeout(() => {\r\n+      if (!this.loading) {\r\n+        this.loadReports();\r\n+      }\r\n+    }, 300);\r\n   }\r\n \r\n   private refreshCharts() {\r\n     // Trigger window resize to force charts to render\r\n@@ -133,9 +137,11 @@\n   }\r\n \r\n   async loadSalesChart() {\r\n     try {\r\n+      console.log('ðŸ“Š Loading sales chart data...');\r\n       const orders = await this.orderService.getAllOrders();\r\n+      console.log('ðŸ“Š Orders loaded:', orders.length);\r\n       \r\n       // Group orders by date\r\n       const salesByDate = new Map<string, number>();\r\n       orders.forEach((order: any) => {\r\n@@ -153,16 +159,21 @@\n       const data = sortedDates.map(date => salesByDate.get(date) || 0);\r\n \r\n       // If no data, use sample data for demo\r\n       if (sortedDates.length === 0) {\r\n-        console.warn('No sales data available, using sample data');\r\n-        sortedDates.push('No data');\r\n-        data.push(0);\r\n+        console.warn('âš ï¸ No sales data available, using sample data');\r\n+        const today = new Date();\r\n+        for (let i = 6; i >= 0; i--) {\r\n+          const date = new Date(today);\r\n+          date.setDate(date.getDate() - i);\r\n+          sortedDates.push(date.toLocaleDateString());\r\n+          data.push(Math.floor(Math.random() * 5000) + 1000);\r\n+        }\r\n       }\r\n \r\n-      console.log('Creating sales chart...', !!this.salesChartRef);\r\n+      console.log('ðŸ“Š Sales chart canvas ref:', !!this.salesChartRef, 'element:', !!this.salesChartRef?.nativeElement);\r\n       if (!this.salesChartRef || !this.salesChartRef.nativeElement) {\r\n-        console.error('Sales chart canvas not found');\r\n+        console.error('âŒ Sales chart canvas not found');\r\n         return;\r\n       }\r\n       \r\n       if (this.salesChart) {\r\n"
                },
                {
                    "date": 1764511095227,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -253,9 +253,11 @@\n   }\r\n \r\n   async loadCategoryChart() {\r\n     try {\r\n+      console.log('ðŸ“Š Loading category chart data...');\r\n       const products = await this.productService.getAllProducts();\r\n+      console.log('ðŸ“Š Products loaded:', products.length);\r\n       \r\n       const categoryCount = new Map<string, number>();\r\n       products.forEach((product: any) => {\r\n         const category = product.category || 'Other';\r\n@@ -266,16 +268,16 @@\n       const counts = categories.map(cat => categoryCount.get(cat) || 0);\r\n \r\n       // If no data, use sample data for demo\r\n       if (categories.length === 0) {\r\n-        console.warn('No category data available, using sample data');\r\n-        categories.push('No products');\r\n-        counts.push(0);\r\n+        console.warn('âš ï¸ No category data available, using sample data');\r\n+        categories.push('Electronics', 'Books', 'Clothing', 'Food', 'Other');\r\n+        counts.push(15, 23, 18, 12, 8);\r\n       }\r\n \r\n-      console.log('Creating category chart...', !!this.categoryChartRef);\r\n+      console.log('ðŸ“Š Category chart canvas ref:', !!this.categoryChartRef, 'element:', !!this.categoryChartRef?.nativeElement);\r\n       if (!this.categoryChartRef || !this.categoryChartRef.nativeElement) {\r\n-        console.error('Category chart canvas not found');\r\n+        console.error('âŒ Category chart canvas not found');\r\n         return;\r\n       }\r\n       \r\n       if (this.categoryChart) {\r\n@@ -339,10 +341,12 @@\n   }\r\n \r\n   async loadTopSellersChart() {\r\n     try {\r\n+      console.log('ðŸ“Š Loading top sellers chart data...');\r\n       const orders = await this.orderService.getAllOrders();\r\n       const users = await this.userService.getAllUsers();\r\n+      console.log('ðŸ“Š Orders loaded for sellers:', orders.length);\r\n       \r\n       const salesBySeller = new Map<string, { name: string; total: number }>();\r\n       \r\n       orders.forEach((order: any) => {\r\n@@ -359,15 +363,21 @@\n         .slice(0, 10);\r\n \r\n       // If no data, use sample data for demo\r\n       if (topSellers.length === 0) {\r\n-        console.warn('No seller data available, using sample data');\r\n-        topSellers.push({ name: 'No sellers', total: 0 });\r\n+        console.warn('âš ï¸ No seller data available, using sample data');\r\n+        topSellers.push(\r\n+          { name: 'Seller A', total: 8500 },\r\n+          { name: 'Seller B', total: 7200 },\r\n+          { name: 'Seller C', total: 6300 },\r\n+          { name: 'Seller D', total: 5100 },\r\n+          { name: 'Seller E', total: 4200 }\r\n+        );\r\n       }\r\n \r\n-      console.log('Creating top sellers chart...', !!this.topSellersChartRef);\r\n+      console.log('ðŸ“Š Top sellers chart canvas ref:', !!this.topSellersChartRef, 'element:', !!this.topSellersChartRef?.nativeElement);\r\n       if (!this.topSellersChartRef || !this.topSellersChartRef.nativeElement) {\r\n-        console.error('Top sellers chart canvas not found');\r\n+        console.error('âŒ Top sellers chart canvas not found');\r\n         return;\r\n       }\r\n       \r\n       if (this.topSellersChart) {\r\n@@ -441,9 +451,11 @@\n   }\r\n \r\n   async loadStatusChart() {\r\n     try {\r\n+      console.log('ðŸ“Š Loading status chart data...');\r\n       const orders = await this.orderService.getAllOrders();\r\n+      console.log('ðŸ“Š Orders loaded for status:', orders.length);\r\n       \r\n       const statusCount = {\r\n         placed: 0,\r\n         confirmed: 0,\r\n@@ -458,11 +470,22 @@\n           (statusCount as any)[status]++;\r\n         }\r\n       });\r\n \r\n-      console.log('Creating status chart...', !!this.statusChartRef);\r\n+      // If no data, use sample data\r\n+      const hasData = Object.values(statusCount).some(count => count > 0);\r\n+      if (!hasData) {\r\n+        console.warn('âš ï¸ No order status data available, using sample data');\r\n+        statusCount.placed = 12;\r\n+        statusCount.confirmed = 8;\r\n+        statusCount.ready_for_pickup = 4;\r\n+        statusCount.completed = 23;\r\n+        statusCount.cancelled = 3;\r\n+      }\r\n+\r\n+      console.log('ðŸ“Š Status chart canvas ref:', !!this.statusChartRef, 'element:', !!this.statusChartRef?.nativeElement);\r\n       if (!this.statusChartRef || !this.statusChartRef.nativeElement) {\r\n-        console.error('Status chart canvas not found');\r\n+        console.error('âŒ Status chart canvas not found');\r\n         return;\r\n       }\r\n       \r\n       if (this.statusChart) {\r\n"
                },
                {
                    "date": 1764511480404,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,25 +68,43 @@\n     console.log('Reports page initialized');\r\n   }\r\n \r\n   ngAfterViewInit() {\r\n-    console.log('View initialized, loading reports...');\r\n+    console.log('ðŸš€ View initialized, loading reports...');\r\n     // Delay to ensure canvas elements are fully rendered\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 500);\r\n+    }, 100);\r\n   }\r\n \r\n   ionViewDidEnter() {\r\n-    console.log('View entered, ensuring charts render...');\r\n-    // Reload charts when view is entered\r\n+    console.log('ðŸš€ View entered, ensuring charts render...');\r\n+    // Destroy existing charts and reload\r\n+    this.destroyAllCharts();\r\n     setTimeout(() => {\r\n-      if (!this.loading) {\r\n-        this.loadReports();\r\n-      }\r\n-    }, 300);\r\n+      this.loadReports();\r\n+    }, 200);\r\n   }\r\n \r\n+  private destroyAllCharts() {\r\n+    if (this.salesChart) {\r\n+      this.salesChart.destroy();\r\n+      this.salesChart = null;\r\n+    }\r\n+    if (this.categoryChart) {\r\n+      this.categoryChart.destroy();\r\n+      this.categoryChart = null;\r\n+    }\r\n+    if (this.topSellersChart) {\r\n+      this.topSellersChart.destroy();\r\n+      this.topSellersChart = null;\r\n+    }\r\n+    if (this.statusChart) {\r\n+      this.statusChart.destroy();\r\n+      this.statusChart = null;\r\n+    }\r\n+  }\r\n+\r\n   private refreshCharts() {\r\n     // Trigger window resize to force charts to render\r\n     window.dispatchEvent(new Event('resize'));\r\n   }\r\n@@ -182,21 +200,15 @@\n         this.salesChart = null;\r\n       }\r\n       \r\n       const canvas = this.salesChartRef.nativeElement;\r\n-      canvas.width = canvas.offsetWidth;\r\n-      canvas.height = 300;\r\n       const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('Failed to get 2d context for sales chart');\r\n+        console.error('âŒ Failed to get 2d context for sales chart');\r\n         return;\r\n       }\r\n       \r\n-      // Set white background\r\n-      ctx.fillStyle = '#ffffff';\r\n-      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n-      \r\n-      console.log('Rendering sales chart with', sortedDates.length, 'data points');\r\n+      console.log('âœ… Rendering sales chart with', sortedDates.length, 'data points, data:', data);\r\n       this.salesChart = new Chart(ctx, {\r\n         type: 'line',\r\n         data: {\r\n           labels: sortedDates,\r\n@@ -286,21 +298,15 @@\n         this.categoryChart = null;\r\n       }\r\n       \r\n       const canvas = this.categoryChartRef.nativeElement;\r\n-      canvas.width = canvas.offsetWidth;\r\n-      canvas.height = 300;\r\n       const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('Failed to get 2d context for category chart');\r\n+        console.error('âŒ Failed to get 2d context for category chart');\r\n         return;\r\n       }\r\n       \r\n-      // Set white background\r\n-      ctx.fillStyle = '#ffffff';\r\n-      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n-      \r\n-      console.log('Rendering category chart with', categories.length, 'categories');\r\n+      console.log('âœ… Rendering category chart with', categories.length, 'categories, data:', counts);\r\n       this.categoryChart = new Chart(ctx, {\r\n         type: 'pie',\r\n         data: {\r\n           labels: categories,\r\n@@ -386,20 +392,14 @@\n         this.topSellersChart = null;\r\n       }\r\n       \r\n       const canvas = this.topSellersChartRef.nativeElement;\r\n-      canvas.width = canvas.offsetWidth;\r\n-      canvas.height = 300;\r\n       const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('Failed to get 2d context for top sellers chart');\r\n+        console.error('âŒ Failed to get 2d context for top sellers chart');\r\n         return;\r\n       }\r\n       \r\n-      // Set white background\r\n-      ctx.fillStyle = '#ffffff';\r\n-      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n-      \r\n       // Generate gradient colors for bars\r\n       const barColors = topSellers.map((_, index) => {\r\n         const hue = (index * 360 / topSellers.length);\r\n         return `hsl(${hue}, 70%, 50%)`;\r\n@@ -494,20 +494,14 @@\n         this.statusChart = null;\r\n       }\r\n       \r\n       const canvas = this.statusChartRef.nativeElement;\r\n-      canvas.width = canvas.offsetWidth;\r\n-      canvas.height = 300;\r\n       const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('Failed to get 2d context for status chart');\r\n+        console.error('âŒ Failed to get 2d context for status chart');\r\n         return;\r\n       }\r\n       \r\n-      // Set white background\r\n-      ctx.fillStyle = '#ffffff';\r\n-      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n-      \r\n       console.log('Rendering status chart');\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n"
                },
                {
                    "date": 1764511733447,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -404,18 +404,21 @@\n         const hue = (index * 360 / topSellers.length);\r\n         return `hsl(${hue}, 70%, 50%)`;\r\n       });\r\n       \r\n-      console.log('Rendering top sellers chart with', topSellers.length, 'sellers');\r\n+      const names = topSellers.map(s => s.name);\r\n+      const sales = topSellers.map(s => s.total);\r\n+      \r\n+      console.log('âœ… Rendering top sellers chart with', topSellers.length, 'sellers, data:', sales);\r\n       this.topSellersChart = new Chart(ctx, {\r\n         type: 'bar',\r\n         data: {\r\n-          labels: topSellers.map(s => s.name),\r\n+          labels: names,\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n-            data: topSellers.map(s => s.total),\r\n-            backgroundColor: barColors,\r\n-            borderColor: barColors,\r\n+            data: sales,\r\n+            backgroundColor: '#4caf50',\r\n+            borderColor: '#4caf50',\r\n             borderWidth: 1\r\n           }]\r\n         },\r\n         options: {\r\n@@ -500,24 +503,26 @@\n         console.error('âŒ Failed to get 2d context for status chart');\r\n         return;\r\n       }\r\n       \r\n-      console.log('Rendering status chart');\r\n+      const chartData = [\r\n+        statusCount.placed,\r\n+        statusCount.confirmed,\r\n+        statusCount.ready_for_pickup,\r\n+        statusCount.completed,\r\n+        statusCount.cancelled\r\n+      ];\r\n+      \r\n+      console.log('âœ… Rendering status chart, data:', chartData);\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n           labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n           datasets: [{\r\n-            data: [\r\n-              statusCount.placed,\r\n-              statusCount.confirmed,\r\n-              statusCount.ready_for_pickup,\r\n-              statusCount.completed,\r\n-              statusCount.cancelled\r\n-            ],\r\n-            backgroundColor: ['#ffa726', '#42a5f5', '#ab47bc', '#66bb6a', '#ef5350'],\r\n+            data: chartData,\r\n+            backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336'],\r\n             borderColor: '#fff',\r\n-            borderWidth: 3,\r\n+            borderWidth: 2,\r\n             hoverOffset: 10\r\n           }]\r\n         },\r\n         options: {\r\n"
                },
                {
                    "date": 1764511760269,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -620,13 +620,11 @@\n     }\r\n   }\r\n \r\n   async refreshReports() {\r\n+    console.log('ðŸ”„ Refreshing reports...');\r\n+    this.destroyAllCharts();\r\n     await this.loadReports();\r\n-    // Force charts to re-render after data refresh\r\n-    setTimeout(() => {\r\n-      this.refreshCharts();\r\n-    }, 500);\r\n   }\r\n \r\n   ngOnDestroy() {\r\n     if (this.salesChart) this.salesChart.destroy();\r\n"
                },
                {
                    "date": 1764583606222,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -155,64 +155,34 @@\n   }\r\n \r\n   async loadSalesChart() {\r\n     try {\r\n-      console.log('ðŸ“Š Loading sales chart data...');\r\n+      console.log('ðŸ”¥ LOADING SALES CHART...');\r\n       const orders = await this.orderService.getAllOrders();\r\n-      console.log('ðŸ“Š Orders loaded:', orders.length);\r\n+      console.log('ðŸ”¥ Orders:', orders.length);\r\n       \r\n-      // Group orders by date\r\n-      const salesByDate = new Map<string, number>();\r\n-      orders.forEach((order: any) => {\r\n-        if (order.status === 'completed' && order.createdAt) {\r\n-          const date = new Date(order.createdAt.toDate()).toLocaleDateString();\r\n-          const current = salesByDate.get(date) || 0;\r\n-          salesByDate.set(date, current + (order.totalPrice || 0));\r\n-        }\r\n-      });\r\n-\r\n-      const sortedDates = Array.from(salesByDate.keys()).sort((a, b) => \r\n-        new Date(a).getTime() - new Date(b).getTime()\r\n-      );\r\n-\r\n-      const data = sortedDates.map(date => salesByDate.get(date) || 0);\r\n-\r\n-      // If no data, use sample data for demo\r\n-      if (sortedDates.length === 0) {\r\n-        console.warn('âš ï¸ No sales data available, using sample data');\r\n-        const today = new Date();\r\n-        for (let i = 6; i >= 0; i--) {\r\n-          const date = new Date(today);\r\n-          date.setDate(date.getDate() - i);\r\n-          sortedDates.push(date.toLocaleDateString());\r\n-          data.push(Math.floor(Math.random() * 5000) + 1000);\r\n-        }\r\n-      }\r\n-\r\n-      console.log('ðŸ“Š Sales chart canvas ref:', !!this.salesChartRef, 'element:', !!this.salesChartRef?.nativeElement);\r\n-      if (!this.salesChartRef || !this.salesChartRef.nativeElement) {\r\n-        console.error('âŒ Sales chart canvas not found');\r\n+      // Always use sample data to see if chart renders\r\n+      const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\r\n+      const data = [1200, 1900, 3000, 2500, 2000, 3000, 4500];\r\n+      \r\n+      if (!this.salesChartRef?.nativeElement) {\r\n+        console.error('ðŸ”¥ NO CANVAS ELEMENT!');\r\n         return;\r\n       }\r\n       \r\n-      if (this.salesChart) {\r\n-        console.log('Destroying existing sales chart');\r\n-        this.salesChart.destroy();\r\n-        this.salesChart = null;\r\n-      }\r\n-      \r\n       const canvas = this.salesChartRef.nativeElement;\r\n       const ctx = canvas.getContext('2d');\r\n+      \r\n       if (!ctx) {\r\n-        console.error('âŒ Failed to get 2d context for sales chart');\r\n+        console.error('ðŸ”¥ NO CONTEXT!');\r\n         return;\r\n       }\r\n       \r\n-      console.log('âœ… Rendering sales chart with', sortedDates.length, 'data points, data:', data);\r\n+      console.log('ðŸ”¥ CREATING CHART NOW...');\r\n       this.salesChart = new Chart(ctx, {\r\n         type: 'line',\r\n         data: {\r\n-          labels: sortedDates,\r\n+          labels: labels,\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n             data: data,\r\n             borderColor: '#2196f3',\r\n@@ -257,62 +227,39 @@\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('Sales chart created successfully');\r\n+      console.log('âœ… SALES CHART CREATED!', this.salesChart);\r\n     } catch (error) {\r\n-      console.error('Error loading sales chart:', error);\r\n+      console.error('ðŸ”¥ ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadCategoryChart() {\r\n     try {\r\n-      console.log('ðŸ“Š Loading category chart data...');\r\n-      const products = await this.productService.getAllProducts();\r\n-      console.log('ðŸ“Š Products loaded:', products.length);\r\n+      console.log('ðŸ”¥ LOADING CATEGORY CHART...');\r\n       \r\n-      const categoryCount = new Map<string, number>();\r\n-      products.forEach((product: any) => {\r\n-        const category = product.category || 'Other';\r\n-        categoryCount.set(category, (categoryCount.get(category) || 0) + 1);\r\n-      });\r\n-\r\n-      const categories = Array.from(categoryCount.keys());\r\n-      const counts = categories.map(cat => categoryCount.get(cat) || 0);\r\n-\r\n-      // If no data, use sample data for demo\r\n-      if (categories.length === 0) {\r\n-        console.warn('âš ï¸ No category data available, using sample data');\r\n-        categories.push('Electronics', 'Books', 'Clothing', 'Food', 'Other');\r\n-        counts.push(15, 23, 18, 12, 8);\r\n-      }\r\n-\r\n-      console.log('ðŸ“Š Category chart canvas ref:', !!this.categoryChartRef, 'element:', !!this.categoryChartRef?.nativeElement);\r\n-      if (!this.categoryChartRef || !this.categoryChartRef.nativeElement) {\r\n-        console.error('âŒ Category chart canvas not found');\r\n+      const labels = ['Electronics', 'Books', 'Clothing', 'Food', 'Accessories', 'Snacks', 'Other'];\r\n+      const data = [15, 23, 18, 12, 10, 8, 5];\r\n+      \r\n+      if (!this.categoryChartRef?.nativeElement) {\r\n+        console.error('ðŸ”¥ NO CANVAS!');\r\n         return;\r\n       }\r\n       \r\n-      if (this.categoryChart) {\r\n-        console.log('Destroying existing category chart');\r\n-        this.categoryChart.destroy();\r\n-        this.categoryChart = null;\r\n-      }\r\n-      \r\n-      const canvas = this.categoryChartRef.nativeElement;\r\n-      const ctx = canvas.getContext('2d');\r\n+      const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('âŒ Failed to get 2d context for category chart');\r\n+        console.error('ðŸ”¥ NO CONTEXT!');\r\n         return;\r\n       }\r\n       \r\n-      console.log('âœ… Rendering category chart with', categories.length, 'categories, data:', counts);\r\n+      console.log('ðŸ”¥ CREATING PIE CHART...');\r\n       this.categoryChart = new Chart(ctx, {\r\n         type: 'pie',\r\n         data: {\r\n-          labels: categories,\r\n+          labels: labels,\r\n           datasets: [{\r\n-            data: counts,\r\n+            data: data,\r\n             backgroundColor: [\r\n               '#ff6384', '#36a2eb', '#ffce56', '#4bc0c0', '#9966ff', '#ff9f40', '#ff6384', '#c9cbcf'\r\n             ],\r\n             borderColor: '#fff',\r\n@@ -339,84 +286,40 @@\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('Category chart created successfully');\r\n+      console.log('âœ… CATEGORY CHART CREATED!');\r\n     } catch (error) {\r\n-      console.error('Error loading category chart:', error);\r\n+      console.error('ðŸ”¥ ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadTopSellersChart() {\r\n     try {\r\n-      console.log('ðŸ“Š Loading top sellers chart data...');\r\n-      const orders = await this.orderService.getAllOrders();\r\n-      const users = await this.userService.getAllUsers();\r\n-      console.log('ðŸ“Š Orders loaded for sellers:', orders.length);\r\n+      console.log('ðŸ”¥ LOADING TOP SELLERS CHART...');\r\n       \r\n-      const salesBySeller = new Map<string, { name: string; total: number }>();\r\n+      const labels = ['Seller A', 'Seller B', 'Seller C', 'Seller D', 'Seller E'];\r\n+      const data = [8500, 7200, 6300, 5100, 4200];\r\n       \r\n-      orders.forEach((order: any) => {\r\n-        if (order.status === 'completed') {\r\n-          const sellerId = order.sellerId;\r\n-          const current = salesBySeller.get(sellerId) || { name: order.sellerName, total: 0 };\r\n-          current.total += order.totalPrice || 0;\r\n-          salesBySeller.set(sellerId, current);\r\n-        }\r\n-      });\r\n-\r\n-      const topSellers = Array.from(salesBySeller.values())\r\n-        .sort((a, b) => b.total - a.total)\r\n-        .slice(0, 10);\r\n-\r\n-      // If no data, use sample data for demo\r\n-      if (topSellers.length === 0) {\r\n-        console.warn('âš ï¸ No seller data available, using sample data');\r\n-        topSellers.push(\r\n-          { name: 'Seller A', total: 8500 },\r\n-          { name: 'Seller B', total: 7200 },\r\n-          { name: 'Seller C', total: 6300 },\r\n-          { name: 'Seller D', total: 5100 },\r\n-          { name: 'Seller E', total: 4200 }\r\n-        );\r\n-      }\r\n-\r\n-      console.log('ðŸ“Š Top sellers chart canvas ref:', !!this.topSellersChartRef, 'element:', !!this.topSellersChartRef?.nativeElement);\r\n-      if (!this.topSellersChartRef || !this.topSellersChartRef.nativeElement) {\r\n-        console.error('âŒ Top sellers chart canvas not found');\r\n+      if (!this.topSellersChartRef?.nativeElement) {\r\n+        console.error('ðŸ”¥ NO CANVAS!');\r\n         return;\r\n       }\r\n       \r\n-      if (this.topSellersChart) {\r\n-        console.log('Destroying existing top sellers chart');\r\n-        this.topSellersChart.destroy();\r\n-        this.topSellersChart = null;\r\n-      }\r\n-      \r\n-      const canvas = this.topSellersChartRef.nativeElement;\r\n-      const ctx = canvas.getContext('2d');\r\n+      const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('âŒ Failed to get 2d context for top sellers chart');\r\n+        console.error('ðŸ”¥ NO CONTEXT!');\r\n         return;\r\n       }\r\n       \r\n-      // Generate gradient colors for bars\r\n-      const barColors = topSellers.map((_, index) => {\r\n-        const hue = (index * 360 / topSellers.length);\r\n-        return `hsl(${hue}, 70%, 50%)`;\r\n-      });\r\n-      \r\n-      const names = topSellers.map(s => s.name);\r\n-      const sales = topSellers.map(s => s.total);\r\n-      \r\n-      console.log('âœ… Rendering top sellers chart with', topSellers.length, 'sellers, data:', sales);\r\n+      console.log('ðŸ”¥ CREATING BAR CHART...');\r\n       this.topSellersChart = new Chart(ctx, {\r\n         type: 'bar',\r\n         data: {\r\n-          labels: names,\r\n+          labels: labels,\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n-            data: sales,\r\n+            data: data,\r\n             backgroundColor: '#4caf50',\r\n             borderColor: '#4caf50',\r\n             borderWidth: 1\r\n           }]\r\n@@ -446,80 +349,39 @@\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('Top sellers chart created successfully');\r\n+      console.log('âœ… BAR CHART CREATED!');\r\n     } catch (error) {\r\n-      console.error('Error loading top sellers chart:', error);\r\n+      console.error('ðŸ”¥ ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadStatusChart() {\r\n     try {\r\n-      console.log('ðŸ“Š Loading status chart data...');\r\n-      const orders = await this.orderService.getAllOrders();\r\n-      console.log('ðŸ“Š Orders loaded for status:', orders.length);\r\n+      console.log('ðŸ”¥ LOADING STATUS CHART...');\r\n       \r\n-      const statusCount = {\r\n-        placed: 0,\r\n-        confirmed: 0,\r\n-        ready_for_pickup: 0,\r\n-        completed: 0,\r\n-        cancelled: 0\r\n-      };\r\n-\r\n-      orders.forEach((order: any) => {\r\n-        const status = order.status || 'placed';\r\n-        if (status in statusCount) {\r\n-          (statusCount as any)[status]++;\r\n-        }\r\n-      });\r\n-\r\n-      // If no data, use sample data\r\n-      const hasData = Object.values(statusCount).some(count => count > 0);\r\n-      if (!hasData) {\r\n-        console.warn('âš ï¸ No order status data available, using sample data');\r\n-        statusCount.placed = 12;\r\n-        statusCount.confirmed = 8;\r\n-        statusCount.ready_for_pickup = 4;\r\n-        statusCount.completed = 23;\r\n-        statusCount.cancelled = 3;\r\n-      }\r\n-\r\n-      console.log('ðŸ“Š Status chart canvas ref:', !!this.statusChartRef, 'element:', !!this.statusChartRef?.nativeElement);\r\n-      if (!this.statusChartRef || !this.statusChartRef.nativeElement) {\r\n-        console.error('âŒ Status chart canvas not found');\r\n+      const labels = ['Placed', 'Confirmed', 'Ready', 'Completed', 'Cancelled'];\r\n+      const data = [12, 8, 4, 23, 3];\r\n+      \r\n+      if (!this.statusChartRef?.nativeElement) {\r\n+        console.error('ðŸ”¥ NO CANVAS!');\r\n         return;\r\n       }\r\n       \r\n-      if (this.statusChart) {\r\n-        console.log('Destroying existing status chart');\r\n-        this.statusChart.destroy();\r\n-        this.statusChart = null;\r\n-      }\r\n-      \r\n-      const canvas = this.statusChartRef.nativeElement;\r\n-      const ctx = canvas.getContext('2d');\r\n+      const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('âŒ Failed to get 2d context for status chart');\r\n+        console.error('ðŸ”¥ NO CONTEXT!');\r\n         return;\r\n       }\r\n       \r\n-      const chartData = [\r\n-        statusCount.placed,\r\n-        statusCount.confirmed,\r\n-        statusCount.ready_for_pickup,\r\n-        statusCount.completed,\r\n-        statusCount.cancelled\r\n-      ];\r\n-      \r\n-      console.log('âœ… Rendering status chart, data:', chartData);\r\n+      console.log('ðŸ”¥ CREATING DOUGHNUT CHART...');\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n-          labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n+          labels: labels,\r\n           datasets: [{\r\n-            data: chartData,\r\n+            data: data,\r\n             backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336'],\r\n             borderColor: '#fff',\r\n             borderWidth: 2,\r\n             hoverOffset: 10\r\n@@ -545,11 +407,11 @@\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('Status chart created successfully');\r\n+      console.log('âœ… DOUGHNUT CHART CREATED!');\r\n     } catch (error) {\r\n-      console.error('Error loading status chart:', error);\r\n+      console.error('ðŸ”¥ ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async printReport() {\r\n"
                },
                {
                    "date": 1764586750460,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,18 +72,22 @@\n     console.log('ðŸš€ View initialized, loading reports...');\r\n     // Delay to ensure canvas elements are fully rendered\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 100);\r\n+    }, 300);\r\n   }\r\n \r\n   ionViewDidEnter() {\r\n     console.log('ðŸš€ View entered, ensuring charts render...');\r\n     // Destroy existing charts and reload\r\n     this.destroyAllCharts();\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 200);\r\n+      // Force charts to resize after render\r\n+      setTimeout(() => {\r\n+        this.refreshCharts();\r\n+      }, 500);\r\n+    }, 300);\r\n   }\r\n \r\n   private destroyAllCharts() {\r\n     if (this.salesChart) {\r\n@@ -155,263 +159,331 @@\n   }\r\n \r\n   async loadSalesChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ LOADING SALES CHART...');\r\n-      const orders = await this.orderService.getAllOrders();\r\n-      console.log('ðŸ”¥ Orders:', orders.length);\r\n+      console.log('ðŸ”¥ SALES CHART START');\r\n       \r\n-      // Always use sample data to see if chart renders\r\n-      const labels = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];\r\n-      const data = [1200, 1900, 3000, 2500, 2000, 3000, 4500];\r\n-      \r\n       if (!this.salesChartRef?.nativeElement) {\r\n-        console.error('ðŸ”¥ NO CANVAS ELEMENT!');\r\n+        console.error('âŒ Canvas not found');\r\n         return;\r\n       }\r\n+\r\n+      const canvas = this.salesChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      const canvas = this.salesChartRef.nativeElement;\r\n+      // Force canvas dimensions\r\n+      canvas.style.display = 'block';\r\n+      canvas.width = canvas.offsetWidth || 400;\r\n+      canvas.height = 300;\r\n+      \r\n       const ctx = canvas.getContext('2d');\r\n-      \r\n       if (!ctx) {\r\n-        console.error('ðŸ”¥ NO CONTEXT!');\r\n+        console.error('âŒ No context');\r\n         return;\r\n       }\r\n-      \r\n-      console.log('ðŸ”¥ CREATING CHART NOW...');\r\n+\r\n+      // Destroy existing chart\r\n+      if (this.salesChart) {\r\n+        this.salesChart.destroy();\r\n+        this.salesChart = null;\r\n+      }\r\n+\r\n+      // HARDCODED DATA - NO DATABASE CALLS\r\n       this.salesChart = new Chart(ctx, {\r\n         type: 'line',\r\n         data: {\r\n-          labels: labels,\r\n+          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n-            data: data,\r\n-            borderColor: '#2196f3',\r\n-            backgroundColor: 'rgba(33, 150, 243, 0.2)',\r\n+            data: [1200, 1900, 3000, 2500, 2000, 3500, 4500],\r\n+            borderColor: '#2196F3',\r\n+            backgroundColor: 'rgba(33, 150, 243, 0.1)',\r\n             borderWidth: 3,\r\n-            pointBackgroundColor: '#2196f3',\r\n+            tension: 0.4,\r\n+            fill: true,\r\n+            pointRadius: 6,\r\n+            pointHoverRadius: 8,\r\n+            pointBackgroundColor: '#2196F3',\r\n             pointBorderColor: '#fff',\r\n-            pointBorderWidth: 2,\r\n-            pointRadius: 5,\r\n-            pointHoverRadius: 7,\r\n-            tension: 0.4,\r\n-            fill: true\r\n+            pointBorderWidth: 2\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n+          animation: {\r\n+            duration: 1000\r\n+          },\r\n           plugins: {\r\n-            legend: { \r\n+            legend: {\r\n               display: true,\r\n-              labels: {\r\n-                color: '#000',\r\n-                font: { size: 12 }\r\n-              }\r\n+              position: 'top',\r\n+              labels: { color: '#000', font: { size: 12, weight: 'bold' } }\r\n             },\r\n-            title: { \r\n-              display: true, \r\n-              text: 'Sales Over Time',\r\n-              color: '#000',\r\n-              font: { size: 16, weight: 'bold' }\r\n+            title: {\r\n+              display: false\r\n             }\r\n           },\r\n           scales: {\r\n-            y: { \r\n+            y: {\r\n               beginAtZero: true,\r\n-              ticks: { color: '#000' },\r\n+              ticks: { color: '#000', font: { size: 11 } },\r\n               grid: { color: 'rgba(0,0,0,0.1)' }\r\n             },\r\n             x: {\r\n-              ticks: { color: '#000' },\r\n-              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+              ticks: { color: '#000', font: { size: 11 } },\r\n+              grid: { display: false }\r\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('âœ… SALES CHART CREATED!', this.salesChart);\r\n+\r\n+      // Force update\r\n+      this.salesChart.update('active');\r\n+      console.log('âœ… SALES CHART CREATED');\r\n     } catch (error) {\r\n-      console.error('ðŸ”¥ ERROR:', error);\r\n+      console.error('âŒ SALES CHART ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadCategoryChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ LOADING CATEGORY CHART...');\r\n-      \r\n-      const labels = ['Electronics', 'Books', 'Clothing', 'Food', 'Accessories', 'Snacks', 'Other'];\r\n-      const data = [15, 23, 18, 12, 10, 8, 5];\r\n-      \r\n+      console.log('ðŸ”¥ CATEGORY CHART START');\r\n+\r\n       if (!this.categoryChartRef?.nativeElement) {\r\n-        console.error('ðŸ”¥ NO CANVAS!');\r\n+        console.error('âŒ Canvas not found');\r\n         return;\r\n       }\r\n+\r\n+      const canvas = this.categoryChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n+      // Force canvas dimensions\r\n+      canvas.style.display = 'block';\r\n+      canvas.width = canvas.offsetWidth || 400;\r\n+      canvas.height = 300;\r\n+      \r\n+      const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('ðŸ”¥ NO CONTEXT!');\r\n+        console.error('âŒ No context');\r\n         return;\r\n       }\r\n-      \r\n-      console.log('ðŸ”¥ CREATING PIE CHART...');\r\n+\r\n+      if (this.categoryChart) {\r\n+        this.categoryChart.destroy();\r\n+        this.categoryChart = null;\r\n+      }\r\n+\r\n+      // HARDCODED DATA\r\n       this.categoryChart = new Chart(ctx, {\r\n         type: 'pie',\r\n         data: {\r\n-          labels: labels,\r\n+          labels: ['Electronics', 'Books', 'Clothing', 'Food', 'Accessories', 'Snacks', 'Other'],\r\n           datasets: [{\r\n-            data: data,\r\n+            data: [25, 18, 15, 20, 8, 10, 4],\r\n             backgroundColor: [\r\n-              '#ff6384', '#36a2eb', '#ffce56', '#4bc0c0', '#9966ff', '#ff9f40', '#ff6384', '#c9cbcf'\r\n+              '#FF6384',\r\n+              '#36A2EB',\r\n+              '#FFCE56',\r\n+              '#4BC0C0',\r\n+              '#9966FF',\r\n+              '#FF9F40',\r\n+              '#C9CBCF'\r\n             ],\r\n-            borderColor: '#fff',\r\n-            borderWidth: 2\r\n+            borderColor: '#ffffff',\r\n+            borderWidth: 3,\r\n+            hoverOffset: 15\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n+          animation: {\r\n+            duration: 1000\r\n+          },\r\n           plugins: {\r\n-            legend: { \r\n+            legend: {\r\n+              display: true,\r\n               position: 'right',\r\n               labels: {\r\n                 color: '#000',\r\n                 font: { size: 11 },\r\n-                padding: 10\r\n+                padding: 15,\r\n+                usePointStyle: true\r\n               }\r\n             },\r\n-            title: { \r\n-              display: true, \r\n-              text: 'Products by Category',\r\n-              color: '#000',\r\n-              font: { size: 16, weight: 'bold' }\r\n+            title: {\r\n+              display: false\r\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('âœ… CATEGORY CHART CREATED!');\r\n+\r\n+      // Force update\r\n+      this.categoryChart.update('active');\r\n+      console.log('âœ… CATEGORY CHART CREATED');\r\n     } catch (error) {\r\n-      console.error('ðŸ”¥ ERROR:', error);\r\n+      console.error('âŒ CATEGORY CHART ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadTopSellersChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ LOADING TOP SELLERS CHART...');\r\n-      \r\n-      const labels = ['Seller A', 'Seller B', 'Seller C', 'Seller D', 'Seller E'];\r\n-      const data = [8500, 7200, 6300, 5100, 4200];\r\n-      \r\n+      console.log('ðŸ”¥ TOP SELLERS CHART START');\r\n+\r\n       if (!this.topSellersChartRef?.nativeElement) {\r\n-        console.error('ðŸ”¥ NO CANVAS!');\r\n+        console.error('âŒ Canvas not found');\r\n         return;\r\n       }\r\n+\r\n+      const canvas = this.topSellersChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n+      // Force canvas dimensions\r\n+      canvas.style.display = 'block';\r\n+      canvas.width = canvas.offsetWidth || 400;\r\n+      canvas.height = 300;\r\n+      \r\n+      const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('ðŸ”¥ NO CONTEXT!');\r\n+        console.error('âŒ No context');\r\n         return;\r\n       }\r\n-      \r\n-      console.log('ðŸ”¥ CREATING BAR CHART...');\r\n+\r\n+      if (this.topSellersChart) {\r\n+        this.topSellersChart.destroy();\r\n+        this.topSellersChart = null;\r\n+      }\r\n+\r\n+      // HARDCODED DATA\r\n       this.topSellersChart = new Chart(ctx, {\r\n         type: 'bar',\r\n         data: {\r\n-          labels: labels,\r\n+          labels: ['Seller A', 'Seller B', 'Seller C', 'Seller D', 'Seller E'],\r\n           datasets: [{\r\n-            label: 'Sales (â‚±)',\r\n-            data: data,\r\n-            backgroundColor: '#4caf50',\r\n-            borderColor: '#4caf50',\r\n-            borderWidth: 1\r\n+            label: 'Total Sales (â‚±)',\r\n+            data: [8500, 7200, 6300, 5100, 4200],\r\n+            backgroundColor: [\r\n+              '#4CAF50',\r\n+              '#66BB6A',\r\n+              '#81C784',\r\n+              '#A5D6A7',\r\n+              '#C8E6C9'\r\n+            ],\r\n+            borderColor: '#2E7D32',\r\n+            borderWidth: 2,\r\n+            borderRadius: 8\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n+          animation: {\r\n+            duration: 1000\r\n+          },\r\n           indexAxis: 'y',\r\n           plugins: {\r\n-            legend: { display: false },\r\n-            title: { \r\n-              display: true, \r\n-              text: 'Top 10 Sellers',\r\n-              color: '#000',\r\n-              font: { size: 16, weight: 'bold' }\r\n+            legend: {\r\n+              display: false\r\n+            },\r\n+            title: {\r\n+              display: false\r\n             }\r\n           },\r\n           scales: {\r\n-            x: { \r\n+            x: {\r\n               beginAtZero: true,\r\n-              ticks: { color: '#000' },\r\n+              ticks: { color: '#000', font: { size: 11 } },\r\n               grid: { color: 'rgba(0,0,0,0.1)' }\r\n             },\r\n             y: {\r\n-              ticks: { color: '#000' },\r\n-              grid: { color: 'rgba(0,0,0,0.1)' }\r\n+              ticks: { color: '#000', font: { size: 11, weight: 'bold' } },\r\n+              grid: { display: false }\r\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('âœ… BAR CHART CREATED!');\r\n+\r\n+      // Force update\r\n+      this.topSellersChart.update('active');\r\n+      console.log('âœ… TOP SELLERS CHART CREATED');\r\n     } catch (error) {\r\n-      console.error('ðŸ”¥ ERROR:', error);\r\n+      console.error('âŒ TOP SELLERS CHART ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async loadStatusChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ LOADING STATUS CHART...');\r\n-      \r\n-      const labels = ['Placed', 'Confirmed', 'Ready', 'Completed', 'Cancelled'];\r\n-      const data = [12, 8, 4, 23, 3];\r\n-      \r\n+      console.log('ðŸ”¥ STATUS CHART START');\r\n+\r\n       if (!this.statusChartRef?.nativeElement) {\r\n-        console.error('ðŸ”¥ NO CANVAS!');\r\n+        console.error('âŒ Canvas not found');\r\n         return;\r\n       }\r\n+\r\n+      const canvas = this.statusChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n+      // Force canvas dimensions\r\n+      canvas.style.display = 'block';\r\n+      canvas.width = canvas.offsetWidth || 400;\r\n+      canvas.height = 300;\r\n+      \r\n+      const ctx = canvas.getContext('2d');\r\n       if (!ctx) {\r\n-        console.error('ðŸ”¥ NO CONTEXT!');\r\n+        console.error('âŒ No context');\r\n         return;\r\n       }\r\n-      \r\n-      console.log('ðŸ”¥ CREATING DOUGHNUT CHART...');\r\n+\r\n+      if (this.statusChart) {\r\n+        this.statusChart.destroy();\r\n+        this.statusChart = null;\r\n+      }\r\n+\r\n+      // HARDCODED DATA\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n-          labels: labels,\r\n+          labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n           datasets: [{\r\n-            data: data,\r\n-            backgroundColor: ['#ff9800', '#2196f3', '#9c27b0', '#4caf50', '#f44336'],\r\n-            borderColor: '#fff',\r\n-            borderWidth: 2,\r\n-            hoverOffset: 10\r\n+            data: [12, 8, 5, 23, 2],\r\n+            backgroundColor: [\r\n+              '#FF9800',\r\n+              '#2196F3',\r\n+              '#9C27B0',\r\n+              '#4CAF50',\r\n+              '#F44336'\r\n+            ],\r\n+            borderColor: '#ffffff',\r\n+            borderWidth: 3,\r\n+            hoverOffset: 20\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n+          animation: {\r\n+            duration: 1000\r\n+          },\r\n           plugins: {\r\n-            legend: { \r\n+            legend: {\r\n+              display: true,\r\n               position: 'bottom',\r\n               labels: {\r\n                 color: '#000',\r\n                 font: { size: 11 },\r\n-                padding: 15\r\n+                padding: 15,\r\n+                usePointStyle: true\r\n               }\r\n             },\r\n-            title: { \r\n-              display: true, \r\n-              text: 'Order Status Breakdown',\r\n-              color: '#000',\r\n-              font: { size: 16, weight: 'bold' }\r\n+            title: {\r\n+              display: false\r\n             }\r\n           }\r\n         }\r\n       });\r\n-      console.log('âœ… DOUGHNUT CHART CREATED!');\r\n+\r\n+      // Force update\r\n+      this.statusChart.update('active');\r\n+      console.log('âœ… STATUS CHART CREATED');\r\n     } catch (error) {\r\n-      console.error('ðŸ”¥ ERROR:', error);\r\n+      console.error('âŒ STATUS CHART ERROR:', error);\r\n     }\r\n   }\r\n \r\n   async printReport() {\r\n"
                },
                {
                    "date": 1764586989919,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,9 +72,9 @@\n     console.log('ðŸš€ View initialized, loading reports...');\r\n     // Delay to ensure canvas elements are fully rendered\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 300);\r\n+    }, 500);\r\n   }\r\n \r\n   ionViewDidEnter() {\r\n     console.log('ðŸš€ View entered, ensuring charts render...');\r\n@@ -84,10 +84,11 @@\n       this.loadReports();\r\n       // Force charts to resize after render\r\n       setTimeout(() => {\r\n         this.refreshCharts();\r\n-      }, 500);\r\n-    }, 300);\r\n+        this.forceChartsUpdate();\r\n+      }, 1000);\r\n+    }, 500);\r\n   }\r\n \r\n   private destroyAllCharts() {\r\n     if (this.salesChart) {\r\n@@ -115,15 +116,29 @@\n \r\n   async loadReports() {\r\n     this.loading = true;\r\n     try {\r\n-      await Promise.all([\r\n-        this.loadStats(),\r\n-        this.loadSalesChart(),\r\n-        this.loadCategoryChart(),\r\n-        this.loadTopSellersChart(),\r\n-        this.loadStatusChart()\r\n-      ]);\r\n+      // Load stats first\r\n+      await this.loadStats();\r\n+      \r\n+      // Wait a bit then load charts sequentially to ensure rendering\r\n+      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await this.loadSalesChart();\r\n+      \r\n+      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await this.loadCategoryChart();\r\n+      \r\n+      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await this.loadTopSellersChart();\r\n+      \r\n+      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await this.loadStatusChart();\r\n+      \r\n+      // Force final update\r\n+      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      this.forceChartsUpdate();\r\n+      \r\n+      console.log('âœ… ALL CHARTS LOADED');\r\n     } catch (error) {\r\n       console.error('Error loading reports:', error);\r\n       const toast = await this.toastController.create({\r\n         message: 'Failed to load reports',\r\n@@ -134,8 +149,16 @@\n     } finally {\r\n       this.loading = false;\r\n     }\r\n   }\r\n+  \r\n+  private forceChartsUpdate() {\r\n+    if (this.salesChart) this.salesChart.update();\r\n+    if (this.categoryChart) this.categoryChart.update();\r\n+    if (this.topSellersChart) this.topSellersChart.update();\r\n+    if (this.statusChart) this.statusChart.update();\r\n+    window.dispatchEvent(new Event('resize'));\r\n+  }\r\n \r\n   async loadStats() {\r\n     try {\r\n       const orders = await this.orderService.getAllOrders();\r\n@@ -168,18 +191,34 @@\n       }\r\n \r\n       const canvas = this.salesChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // Force canvas dimensions\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n-      canvas.width = canvas.offsetWidth || 400;\r\n-      canvas.height = 300;\r\n+      canvas.style.visibility = 'visible';\r\n+      canvas.style.opacity = '1';\r\n+      const parent = canvas.parentElement;\r\n+      if (parent) {\r\n+        parent.style.display = 'block';\r\n+        parent.style.minHeight = '320px';\r\n+      }\r\n       \r\n-      const ctx = canvas.getContext('2d');\r\n+      // Set explicit dimensions\r\n+      const width = canvas.parentElement?.offsetWidth || 400;\r\n+      canvas.width = width;\r\n+      canvas.height = 320;\r\n+      canvas.style.width = width + 'px';\r\n+      canvas.style.height = '320px';\r\n+      \r\n+      const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n         return;\r\n       }\r\n+      \r\n+      // Clear canvas with white background\r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n \r\n       // Destroy existing chart\r\n       if (this.salesChart) {\r\n         this.salesChart.destroy();\r\n@@ -254,18 +293,32 @@\n       }\r\n \r\n       const canvas = this.categoryChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // Force canvas dimensions\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n-      canvas.width = canvas.offsetWidth || 400;\r\n-      canvas.height = 300;\r\n+      canvas.style.visibility = 'visible';\r\n+      canvas.style.opacity = '1';\r\n+      const parent = canvas.parentElement;\r\n+      if (parent) {\r\n+        parent.style.display = 'block';\r\n+        parent.style.minHeight = '320px';\r\n+      }\r\n       \r\n-      const ctx = canvas.getContext('2d');\r\n+      const width = canvas.parentElement?.offsetWidth || 400;\r\n+      canvas.width = width;\r\n+      canvas.height = 320;\r\n+      canvas.style.width = width + 'px';\r\n+      canvas.style.height = '320px';\r\n+      \r\n+      const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n         return;\r\n       }\r\n+      \r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n \r\n       if (this.categoryChart) {\r\n         this.categoryChart.destroy();\r\n         this.categoryChart = null;\r\n"
                },
                {
                    "date": 1764587120457,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -387,18 +387,32 @@\n       }\r\n \r\n       const canvas = this.topSellersChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // Force canvas dimensions\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n-      canvas.width = canvas.offsetWidth || 400;\r\n-      canvas.height = 300;\r\n+      canvas.style.visibility = 'visible';\r\n+      canvas.style.opacity = '1';\r\n+      const parent = canvas.parentElement;\r\n+      if (parent) {\r\n+        parent.style.display = 'block';\r\n+        parent.style.minHeight = '320px';\r\n+      }\r\n       \r\n-      const ctx = canvas.getContext('2d');\r\n+      const width = canvas.parentElement?.offsetWidth || 400;\r\n+      canvas.width = width;\r\n+      canvas.height = 320;\r\n+      canvas.style.width = width + 'px';\r\n+      canvas.style.height = '320px';\r\n+      \r\n+      const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n         return;\r\n       }\r\n+      \r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n \r\n       if (this.topSellersChart) {\r\n         this.topSellersChart.destroy();\r\n         this.topSellersChart = null;\r\n@@ -471,18 +485,32 @@\n       }\r\n \r\n       const canvas = this.statusChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // Force canvas dimensions\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n-      canvas.width = canvas.offsetWidth || 400;\r\n-      canvas.height = 300;\r\n+      canvas.style.visibility = 'visible';\r\n+      canvas.style.opacity = '1';\r\n+      const parent = canvas.parentElement;\r\n+      if (parent) {\r\n+        parent.style.display = 'block';\r\n+        parent.style.minHeight = '320px';\r\n+      }\r\n       \r\n-      const ctx = canvas.getContext('2d');\r\n+      const width = canvas.parentElement?.offsetWidth || 400;\r\n+      canvas.width = width;\r\n+      canvas.height = 320;\r\n+      canvas.style.width = width + 'px';\r\n+      canvas.style.height = '320px';\r\n+      \r\n+      const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n         return;\r\n       }\r\n+      \r\n+      ctx.fillStyle = '#ffffff';\r\n+      ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n \r\n       if (this.statusChart) {\r\n         this.statusChart.destroy();\r\n         this.statusChart = null;\r\n"
                },
                {
                    "date": 1764587520963,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -191,23 +191,24 @@\n       }\r\n \r\n       const canvas = this.salesChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE\r\n+      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n         parent.style.minHeight = '320px';\r\n+        parent.style.width = '100%';\r\n       }\r\n       \r\n-      // Set explicit dimensions\r\n-      const width = canvas.parentElement?.offsetWidth || 400;\r\n-      canvas.width = width;\r\n+      // Set explicit dimensions - better for desktop\r\n+      const width = canvas.parentElement?.offsetWidth || 500;\r\n+      canvas.width = width > 50 ? width : 500;\r\n       canvas.height = 320;\r\n-      canvas.style.width = width + 'px';\r\n+      canvas.style.width = '100%';\r\n       canvas.style.height = '320px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n@@ -224,42 +225,49 @@\n         this.salesChart.destroy();\r\n         this.salesChart = null;\r\n       }\r\n \r\n-      // HARDCODED DATA - NO DATABASE CALLS\r\n+      // GET REAL DATA FROM DATABASE\r\n+      const orders = await this.orderService.getAllOrders();\r\n+      const last7Days = this.getLast7Days();\r\n+      const salesByDay = last7Days.map(date => {\r\n+        const dayOrders = orders.filter((o: any) => {\r\n+          const orderDate = o.createdAt?.toDate ? o.createdAt.toDate() : new Date(o.createdAt);\r\n+          return orderDate.toDateString() === date.toDateString() && o.status === 'completed';\r\n+        });\r\n+        return dayOrders.reduce((sum: number, o: any) => sum + (o.totalPrice || 0), 0);\r\n+      });\r\n+\r\n       this.salesChart = new Chart(ctx, {\r\n         type: 'line',\r\n         data: {\r\n-          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],\r\n+          labels: last7Days.map(d => d.toLocaleDateString('en-US', { weekday: 'short' })),\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n-            data: [1200, 1900, 3000, 2500, 2000, 3500, 4500],\r\n-            borderColor: '#2196F3',\r\n-            backgroundColor: 'rgba(33, 150, 243, 0.1)',\r\n+            data: salesByDay,\r\n+            borderColor: '#ffc409',\r\n+            backgroundColor: 'rgba(255, 196, 9, 0.1)',\r\n             borderWidth: 3,\r\n             tension: 0.4,\r\n             fill: true,\r\n             pointRadius: 6,\r\n             pointHoverRadius: 8,\r\n-            pointBackgroundColor: '#2196F3',\r\n+            pointBackgroundColor: '#ffc409',\r\n             pointBorderColor: '#fff',\r\n             pointBorderWidth: 2\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           animation: {\r\n-            duration: 1000\r\n+            duration: 800\r\n           },\r\n           plugins: {\r\n             legend: {\r\n               display: true,\r\n               position: 'top',\r\n               labels: { color: '#000', font: { size: 12, weight: 'bold' } }\r\n-            },\r\n-            title: {\r\n-              display: false\r\n             }\r\n           },\r\n           scales: {\r\n             y: {\r\n@@ -274,15 +282,24 @@\n           }\r\n         }\r\n       });\r\n \r\n-      // Force update\r\n-      this.salesChart.update('active');\r\n-      console.log('âœ… SALES CHART CREATED');\r\n+      this.salesChart.update();\r\n+      console.log('âœ… SALES CHART CREATED WITH REAL DATA');\r\n     } catch (error) {\r\n       console.error('âŒ SALES CHART ERROR:', error);\r\n     }\r\n   }\r\n+  \r\n+  private getLast7Days(): Date[] {\r\n+    const days: Date[] = [];\r\n+    for (let i = 6; i >= 0; i--) {\r\n+      const date = new Date();\r\n+      date.setDate(date.getDate() - i);\r\n+      days.push(date);\r\n+    }\r\n+    return days;\r\n+  }\r\n \r\n   async loadCategoryChart() {\r\n     try {\r\n       console.log('ðŸ”¥ CATEGORY CHART START');\r\n"
                },
                {
                    "date": 1764587529360,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -310,22 +310,23 @@\n       }\r\n \r\n       const canvas = this.categoryChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE\r\n+      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n         parent.style.minHeight = '320px';\r\n+        parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 400;\r\n-      canvas.width = width;\r\n+      const width = canvas.parentElement?.offsetWidth || 500;\r\n+      canvas.width = width > 50 ? width : 500;\r\n       canvas.height = 320;\r\n-      canvas.style.width = width + 'px';\r\n+      canvas.style.width = '100%';\r\n       canvas.style.height = '320px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n@@ -340,23 +341,36 @@\n         this.categoryChart.destroy();\r\n         this.categoryChart = null;\r\n       }\r\n \r\n-      // HARDCODED DATA\r\n+      // GET REAL DATA FROM DATABASE\r\n+      const products = await this.productService.getAllProducts();\r\n+      const categoryCount: { [key: string]: number } = {};\r\n+      products.forEach((p: any) => {\r\n+        const cat = p.category || 'Other';\r\n+        categoryCount[cat] = (categoryCount[cat] || 0) + 1;\r\n+      });\r\n+\r\n+      const categories = Object.keys(categoryCount);\r\n+      const counts = Object.values(categoryCount);\r\n+\r\n       this.categoryChart = new Chart(ctx, {\r\n         type: 'pie',\r\n         data: {\r\n-          labels: ['Electronics', 'Books', 'Clothing', 'Food', 'Accessories', 'Snacks', 'Other'],\r\n+          labels: categories,\r\n           datasets: [{\r\n-            data: [25, 18, 15, 20, 8, 10, 4],\r\n+            data: counts,\r\n             backgroundColor: [\r\n-              '#FF6384',\r\n-              '#36A2EB',\r\n-              '#FFCE56',\r\n-              '#4BC0C0',\r\n-              '#9966FF',\r\n-              '#FF9F40',\r\n-              '#C9CBCF'\r\n+              '#ffc409',\r\n+              '#eb445a',\r\n+              '#3dc2ff',\r\n+              '#2dd36f',\r\n+              '#ffc409',\r\n+              '#92949c',\r\n+              '#c5cae9',\r\n+              '#a5d6a7',\r\n+              '#ffccbc',\r\n+              '#ce93d8'\r\n             ],\r\n             borderColor: '#ffffff',\r\n             borderWidth: 3,\r\n             hoverOffset: 15\r\n@@ -365,9 +379,9 @@\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           animation: {\r\n-            duration: 1000\r\n+            duration: 800\r\n           },\r\n           plugins: {\r\n             legend: {\r\n               display: true,\r\n@@ -377,19 +391,15 @@\n                 font: { size: 11 },\r\n                 padding: 15,\r\n                 usePointStyle: true\r\n               }\r\n-            },\r\n-            title: {\r\n-              display: false\r\n             }\r\n           }\r\n         }\r\n       });\r\n \r\n-      // Force update\r\n-      this.categoryChart.update('active');\r\n-      console.log('âœ… CATEGORY CHART CREATED');\r\n+      this.categoryChart.update();\r\n+      console.log('âœ… CATEGORY CHART CREATED WITH REAL DATA');\r\n     } catch (error) {\r\n       console.error('âŒ CATEGORY CHART ERROR:', error);\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1764587626071,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -414,22 +414,23 @@\n       }\r\n \r\n       const canvas = this.topSellersChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE\r\n+      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n         parent.style.minHeight = '320px';\r\n+        parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 400;\r\n-      canvas.width = width;\r\n+      const width = canvas.parentElement?.offsetWidth || 500;\r\n+      canvas.width = width > 50 ? width : 500;\r\n       canvas.height = 320;\r\n-      canvas.style.width = width + 'px';\r\n+      canvas.style.width = '100%';\r\n       canvas.style.height = '320px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n@@ -444,41 +445,51 @@\n         this.topSellersChart.destroy();\r\n         this.topSellersChart = null;\r\n       }\r\n \r\n-      // HARDCODED DATA\r\n+      // GET REAL DATA FROM DATABASE\r\n+      const orders = await this.orderService.getAllOrders();\r\n+      const sellerSales: { [key: string]: number } = {};\r\n+      \r\n+      orders.filter((o: any) => o.status === 'completed').forEach((o: any) => {\r\n+        const sellerId = o.sellerId || 'Unknown';\r\n+        sellerSales[sellerId] = (sellerSales[sellerId] || 0) + (o.totalPrice || 0);\r\n+      });\r\n+\r\n+      const sortedSellers = Object.entries(sellerSales)\r\n+        .sort(([, a], [, b]) => (b as number) - (a as number))\r\n+        .slice(0, 10);\r\n+\r\n+      const users = await this.userService.getAllUsers();\r\n+      const sellerNames = sortedSellers.map(([id]) => {\r\n+        const user: any = users.find((u: any) => u.uid === id);\r\n+        return user?.displayName || user?.email?.split('@')[0] || 'Seller';\r\n+      });\r\n+      const sellerTotals = sortedSellers.map(([, total]) => total);\r\n+\r\n       this.topSellersChart = new Chart(ctx, {\r\n         type: 'bar',\r\n         data: {\r\n-          labels: ['Seller A', 'Seller B', 'Seller C', 'Seller D', 'Seller E'],\r\n+          labels: sellerNames,\r\n           datasets: [{\r\n             label: 'Total Sales (â‚±)',\r\n-            data: [8500, 7200, 6300, 5100, 4200],\r\n-            backgroundColor: [\r\n-              '#4CAF50',\r\n-              '#66BB6A',\r\n-              '#81C784',\r\n-              '#A5D6A7',\r\n-              '#C8E6C9'\r\n-            ],\r\n-            borderColor: '#2E7D32',\r\n+            data: sellerTotals,\r\n+            backgroundColor: '#2dd36f',\r\n+            borderColor: '#1aa051',\r\n             borderWidth: 2,\r\n             borderRadius: 8\r\n           }]\r\n         },\r\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           animation: {\r\n-            duration: 1000\r\n+            duration: 800\r\n           },\r\n           indexAxis: 'y',\r\n           plugins: {\r\n             legend: {\r\n               display: false\r\n-            },\r\n-            title: {\r\n-              display: false\r\n             }\r\n           },\r\n           scales: {\r\n             x: {\r\n@@ -493,11 +504,10 @@\n           }\r\n         }\r\n       });\r\n \r\n-      // Force update\r\n-      this.topSellersChart.update('active');\r\n-      console.log('âœ… TOP SELLERS CHART CREATED');\r\n+      this.topSellersChart.update();\r\n+      console.log('âœ… TOP SELLERS CHART CREATED WITH REAL DATA');\r\n     } catch (error) {\r\n       console.error('âŒ TOP SELLERS CHART ERROR:', error);\r\n     }\r\n   }\r\n@@ -512,22 +522,23 @@\n       }\r\n \r\n       const canvas = this.statusChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE\r\n+      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n         parent.style.minHeight = '320px';\r\n+        parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 400;\r\n-      canvas.width = width;\r\n+      const width = canvas.parentElement?.offsetWidth || 500;\r\n+      canvas.width = width > 50 ? width : 500;\r\n       canvas.height = 320;\r\n-      canvas.style.width = width + 'px';\r\n+      canvas.style.width = '100%';\r\n       canvas.style.height = '320px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n@@ -542,21 +553,36 @@\n         this.statusChart.destroy();\r\n         this.statusChart = null;\r\n       }\r\n \r\n-      // HARDCODED DATA\r\n+      // GET REAL DATA FROM DATABASE\r\n+      const orders = await this.orderService.getAllOrders();\r\n+      const statusCount = {\r\n+        placed: orders.filter((o: any) => o.status === 'placed').length,\r\n+        confirmed: orders.filter((o: any) => o.status === 'confirmed').length,\r\n+        ready: orders.filter((o: any) => o.status === 'ready_for_pickup').length,\r\n+        completed: orders.filter((o: any) => o.status === 'completed').length,\r\n+        cancelled: orders.filter((o: any) => o.status === 'cancelled').length\r\n+      };\r\n+\r\n       this.statusChart = new Chart(ctx, {\r\n         type: 'doughnut',\r\n         data: {\r\n           labels: ['Placed', 'Confirmed', 'Ready for Pickup', 'Completed', 'Cancelled'],\r\n           datasets: [{\r\n-            data: [12, 8, 5, 23, 2],\r\n+            data: [\r\n+              statusCount.placed,\r\n+              statusCount.confirmed,\r\n+              statusCount.ready,\r\n+              statusCount.completed,\r\n+              statusCount.cancelled\r\n+            ],\r\n             backgroundColor: [\r\n-              '#FF9800',\r\n-              '#2196F3',\r\n-              '#9C27B0',\r\n-              '#4CAF50',\r\n-              '#F44336'\r\n+              '#ffc409',\r\n+              '#3dc2ff',\r\n+              '#a966ff',\r\n+              '#2dd36f',\r\n+              '#eb445a'\r\n             ],\r\n             borderColor: '#ffffff',\r\n             borderWidth: 3,\r\n             hoverOffset: 20\r\n@@ -565,9 +591,9 @@\n         options: {\r\n           responsive: true,\r\n           maintainAspectRatio: false,\r\n           animation: {\r\n-            duration: 1000\r\n+            duration: 800\r\n           },\r\n           plugins: {\r\n             legend: {\r\n               display: true,\r\n@@ -577,19 +603,15 @@\n                 font: { size: 11 },\r\n                 padding: 15,\r\n                 usePointStyle: true\r\n               }\r\n-            },\r\n-            title: {\r\n-              display: false\r\n             }\r\n           }\r\n         }\r\n       });\r\n \r\n-      // Force update\r\n-      this.statusChart.update('active');\r\n-      console.log('âœ… STATUS CHART CREATED');\r\n+      this.statusChart.update();\r\n+      console.log('âœ… STATUS CHART CREATED WITH REAL DATA');\r\n     } catch (error) {\r\n       console.error('âŒ STATUS CHART ERROR:', error);\r\n     }\r\n   }\r\n"
                },
                {
                    "date": 1764588059915,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,23 +72,19 @@\n     console.log('ðŸš€ View initialized, loading reports...');\r\n     // Delay to ensure canvas elements are fully rendered\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 500);\r\n+    }, 400);\r\n   }\r\n \r\n   ionViewDidEnter() {\r\n     console.log('ðŸš€ View entered, ensuring charts render...');\r\n-    // Destroy existing charts and reload\r\n-    this.destroyAllCharts();\r\n-    setTimeout(() => {\r\n-      this.loadReports();\r\n-      // Force charts to resize after render\r\n+    // Only load if charts don't exist\r\n+    if (!this.salesChart && !this.categoryChart) {\r\n       setTimeout(() => {\r\n-        this.refreshCharts();\r\n-        this.forceChartsUpdate();\r\n-      }, 1000);\r\n-    }, 500);\r\n+        this.loadReports();\r\n+      }, 300);\r\n+    }\r\n   }\r\n \r\n   private destroyAllCharts() {\r\n     if (this.salesChart) {\r\n@@ -119,23 +115,23 @@\n     try {\r\n       // Load stats first\r\n       await this.loadStats();\r\n       \r\n-      // Wait a bit then load charts sequentially to ensure rendering\r\n-      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      // Wait a bit then load charts sequentially\r\n+      await new Promise(resolve => setTimeout(resolve, 150));\r\n       await this.loadSalesChart();\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await new Promise(resolve => setTimeout(resolve, 150));\r\n       await this.loadCategoryChart();\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await new Promise(resolve => setTimeout(resolve, 150));\r\n       await this.loadTopSellersChart();\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 100));\r\n+      await new Promise(resolve => setTimeout(resolve, 150));\r\n       await this.loadStatusChart();\r\n       \r\n-      // Force final update\r\n-      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      // Force final update after all charts loaded\r\n+      await new Promise(resolve => setTimeout(resolve, 300));\r\n       this.forceChartsUpdate();\r\n       \r\n       console.log('âœ… ALL CHARTS LOADED');\r\n     } catch (error) {\r\n@@ -147,17 +143,35 @@\n       });\r\n       await toast.present();\r\n     } finally {\r\n       this.loading = false;\r\n+      // One more update after loading state changes\r\n+      setTimeout(() => this.forceChartsUpdate(), 100);\r\n     }\r\n   }\r\n   \r\n   private forceChartsUpdate() {\r\n-    if (this.salesChart) this.salesChart.update();\r\n-    if (this.categoryChart) this.categoryChart.update();\r\n-    if (this.topSellersChart) this.topSellersChart.update();\r\n-    if (this.statusChart) this.statusChart.update();\r\n-    window.dispatchEvent(new Event('resize'));\r\n+    try {\r\n+      if (this.salesChart) {\r\n+        this.salesChart.resize();\r\n+        this.salesChart.update('none');\r\n+      }\r\n+      if (this.categoryChart) {\r\n+        this.categoryChart.resize();\r\n+        this.categoryChart.update('none');\r\n+      }\r\n+      if (this.topSellersChart) {\r\n+        this.topSellersChart.resize();\r\n+        this.topSellersChart.update('none');\r\n+      }\r\n+      if (this.statusChart) {\r\n+        this.statusChart.resize();\r\n+        this.statusChart.update('none');\r\n+      }\r\n+      window.dispatchEvent(new Event('resize'));\r\n+    } catch (e) {\r\n+      console.error('Error updating charts:', e);\r\n+    }\r\n   }\r\n \r\n   async loadStats() {\r\n     try {\r\n@@ -191,25 +205,26 @@\n       }\r\n \r\n       const canvas = this.salesChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n+      \r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n-        parent.style.minHeight = '320px';\r\n+        parent.style.height = '300px';\r\n         parent.style.width = '100%';\r\n       }\r\n       \r\n-      // Set explicit dimensions - better for desktop\r\n-      const width = canvas.parentElement?.offsetWidth || 500;\r\n-      canvas.width = width > 50 ? width : 500;\r\n-      canvas.height = 320;\r\n+      // Set dimensions that work for both mobile and desktop\r\n+      const parentWidth = parent?.offsetWidth || 350;\r\n+      canvas.width = parentWidth > 100 ? parentWidth : 350;\r\n+      canvas.height = 300;\r\n       canvas.style.width = '100%';\r\n-      canvas.style.height = '320px';\r\n+      canvas.style.height = '300px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n@@ -310,24 +325,25 @@\n       }\r\n \r\n       const canvas = this.categoryChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n+      \r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n-        parent.style.minHeight = '320px';\r\n+        parent.style.height = '300px';\r\n         parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 500;\r\n-      canvas.width = width > 50 ? width : 500;\r\n-      canvas.height = 320;\r\n+      const parentWidth = parent?.offsetWidth || 350;\r\n+      canvas.width = parentWidth > 100 ? parentWidth : 350;\r\n+      canvas.height = 300;\r\n       canvas.style.width = '100%';\r\n-      canvas.style.height = '320px';\r\n+      canvas.style.height = '300px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n@@ -414,24 +430,25 @@\n       }\r\n \r\n       const canvas = this.topSellersChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n+      \r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n-        parent.style.minHeight = '320px';\r\n+        parent.style.height = '300px';\r\n         parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 500;\r\n-      canvas.width = width > 50 ? width : 500;\r\n-      canvas.height = 320;\r\n+      const parentWidth = parent?.offsetWidth || 350;\r\n+      canvas.width = parentWidth > 100 ? parentWidth : 350;\r\n+      canvas.height = 300;\r\n       canvas.style.width = '100%';\r\n-      canvas.style.height = '320px';\r\n+      canvas.style.height = '300px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n@@ -522,24 +539,25 @@\n       }\r\n \r\n       const canvas = this.statusChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n-      // FORCE CANVAS TO BE VISIBLE FOR DESKTOP\r\n+      // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n       canvas.style.opacity = '1';\r\n+      \r\n       const parent = canvas.parentElement;\r\n       if (parent) {\r\n         parent.style.display = 'block';\r\n-        parent.style.minHeight = '320px';\r\n+        parent.style.height = '300px';\r\n         parent.style.width = '100%';\r\n       }\r\n       \r\n-      const width = canvas.parentElement?.offsetWidth || 500;\r\n-      canvas.width = width > 50 ? width : 500;\r\n-      canvas.height = 320;\r\n+      const parentWidth = parent?.offsetWidth || 350;\r\n+      canvas.width = parentWidth > 100 ? parentWidth : 350;\r\n+      canvas.height = 300;\r\n       canvas.style.width = '100%';\r\n-      canvas.style.height = '320px';\r\n+      canvas.style.height = '300px';\r\n       \r\n       const ctx = canvas.getContext('2d', { alpha: false });\r\n       if (!ctx) {\r\n         console.error('âŒ No context');\r\n"
                },
                {
                    "date": 1764593334256,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -258,16 +258,16 @@\n           labels: last7Days.map(d => d.toLocaleDateString('en-US', { weekday: 'short' })),\r\n           datasets: [{\r\n             label: 'Sales (â‚±)',\r\n             data: salesByDay,\r\n-            borderColor: '#ffc409',\r\n-            backgroundColor: 'rgba(255, 196, 9, 0.1)',\r\n+            borderColor: '#2dd36f',\r\n+            backgroundColor: 'rgba(45, 211, 111, 0.2)',\r\n             borderWidth: 3,\r\n             tension: 0.4,\r\n             fill: true,\r\n             pointRadius: 6,\r\n             pointHoverRadius: 8,\r\n-            pointBackgroundColor: '#ffc409',\r\n+            pointBackgroundColor: '#2dd36f',\r\n             pointBorderColor: '#fff',\r\n             pointBorderWidth: 2\r\n           }]\r\n         },\r\n@@ -375,18 +375,18 @@\n           labels: categories,\r\n           datasets: [{\r\n             data: counts,\r\n             backgroundColor: [\r\n-              '#ffc409',\r\n-              '#eb445a',\r\n+              '#2dd36f',\r\n               '#3dc2ff',\r\n+              '#1aa051',\r\n+              '#0d8fd9',\r\n+              '#47e095',\r\n+              '#5fc8f5',\r\n               '#2dd36f',\r\n-              '#ffc409',\r\n-              '#92949c',\r\n-              '#c5cae9',\r\n-              '#a5d6a7',\r\n-              '#ffccbc',\r\n-              '#ce93d8'\r\n+              '#3dc2ff',\r\n+              '#1aa051',\r\n+              '#0d8fd9'\r\n             ],\r\n             borderColor: '#ffffff',\r\n             borderWidth: 3,\r\n             hoverOffset: 15\r\n@@ -489,10 +489,10 @@\n           labels: sellerNames,\r\n           datasets: [{\r\n             label: 'Total Sales (â‚±)',\r\n             data: sellerTotals,\r\n-            backgroundColor: '#2dd36f',\r\n-            borderColor: '#1aa051',\r\n+            backgroundColor: '#3dc2ff',\r\n+            borderColor: '#0d8fd9',\r\n             borderWidth: 2,\r\n             borderRadius: 8\r\n           }]\r\n         },\r\n@@ -594,13 +594,13 @@\n               statusCount.completed,\r\n               statusCount.cancelled\r\n             ],\r\n             backgroundColor: [\r\n-              '#ffc409',\r\n               '#3dc2ff',\r\n-              '#a966ff',\r\n               '#2dd36f',\r\n-              '#eb445a'\r\n+              '#5fc8f5',\r\n+              '#47e095',\r\n+              '#1aa051'\r\n             ],\r\n             borderColor: '#ffffff',\r\n             borderWidth: 3,\r\n             hoverOffset: 20\r\n"
                },
                {
                    "date": 1764628677088,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -72,21 +72,34 @@\n     console.log('ðŸš€ View initialized, loading reports...');\r\n     // Delay to ensure canvas elements are fully rendered\r\n     setTimeout(() => {\r\n       this.loadReports();\r\n-    }, 400);\r\n+    }, 500);\r\n   }\r\n \r\n+  ionViewWillEnter() {\r\n+    console.log('ðŸš€ View will enter, preparing charts...');\r\n+  }\r\n+\r\n   ionViewDidEnter() {\r\n     console.log('ðŸš€ View entered, ensuring charts render...');\r\n-    // Only load if charts don't exist\r\n-    if (!this.salesChart && !this.categoryChart) {\r\n-      setTimeout(() => {\r\n+    // Always reload charts when entering the view to ensure they display\r\n+    setTimeout(() => {\r\n+      if (!this.salesChart || !this.categoryChart || !this.topSellersChart || !this.statusChart) {\r\n+        console.log('âš ï¸ Charts missing, reloading...');\r\n         this.loadReports();\r\n-      }, 300);\r\n-    }\r\n+      } else {\r\n+        console.log('âœ… Charts exist, forcing update...');\r\n+        this.forceChartsUpdate();\r\n+      }\r\n+    }, 400);\r\n   }\r\n \r\n+  ionViewWillLeave() {\r\n+    console.log('ðŸ‘‹ View leaving, preserving charts...');\r\n+    // Don't destroy charts when leaving, just hide them\r\n+  }\r\n+\r\n   private destroyAllCharts() {\r\n     if (this.salesChart) {\r\n       this.salesChart.destroy();\r\n       this.salesChart = null;\r\n@@ -110,43 +123,63 @@\n     window.dispatchEvent(new Event('resize'));\r\n   }\r\n \r\n   async loadReports() {\r\n+    console.log('ðŸ“Š Starting loadReports...');\r\n     this.loading = true;\r\n+    \r\n     try {\r\n+      // Verify canvas elements exist\r\n+      if (!this.salesChartRef?.nativeElement || \r\n+          !this.categoryChartRef?.nativeElement || \r\n+          !this.topSellersChartRef?.nativeElement || \r\n+          !this.statusChartRef?.nativeElement) {\r\n+        console.error('âŒ Canvas elements not found! Retrying in 500ms...');\r\n+        await new Promise(resolve => setTimeout(resolve, 500));\r\n+      }\r\n+      \r\n       // Load stats first\r\n       await this.loadStats();\r\n+      console.log('âœ… Stats loaded');\r\n       \r\n       // Wait a bit then load charts sequentially\r\n-      await new Promise(resolve => setTimeout(resolve, 150));\r\n+      await new Promise(resolve => setTimeout(resolve, 200));\r\n       await this.loadSalesChart();\r\n+      console.log('âœ… Sales chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 150));\r\n+      await new Promise(resolve => setTimeout(resolve, 200));\r\n       await this.loadCategoryChart();\r\n+      console.log('âœ… Category chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 150));\r\n+      await new Promise(resolve => setTimeout(resolve, 200));\r\n       await this.loadTopSellersChart();\r\n+      console.log('âœ… Top sellers chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 150));\r\n+      await new Promise(resolve => setTimeout(resolve, 200));\r\n       await this.loadStatusChart();\r\n+      console.log('âœ… Status chart loaded');\r\n       \r\n       // Force final update after all charts loaded\r\n-      await new Promise(resolve => setTimeout(resolve, 300));\r\n+      await new Promise(resolve => setTimeout(resolve, 400));\r\n       this.forceChartsUpdate();\r\n       \r\n-      console.log('âœ… ALL CHARTS LOADED');\r\n+      console.log('âœ…âœ…âœ… ALL CHARTS LOADED SUCCESSFULLY âœ…âœ…âœ…');\r\n     } catch (error) {\r\n-      console.error('Error loading reports:', error);\r\n+      console.error('âŒâŒâŒ Error loading reports:', error);\r\n       const toast = await this.toastController.create({\r\n-        message: 'Failed to load reports',\r\n-        duration: 3000,\r\n-        color: 'danger'\r\n+        message: 'Failed to load reports. Click refresh to try again.',\r\n+        duration: 4000,\r\n+        color: 'danger',\r\n+        position: 'top'\r\n       });\r\n       await toast.present();\r\n     } finally {\r\n       this.loading = false;\r\n       // One more update after loading state changes\r\n-      setTimeout(() => this.forceChartsUpdate(), 100);\r\n+      setTimeout(() => {\r\n+        this.forceChartsUpdate();\r\n+        console.log('ðŸ”„ Final chart update completed');\r\n+      }, 200);\r\n     }\r\n   }\r\n   \r\n   private forceChartsUpdate() {\r\n@@ -702,11 +735,29 @@\n     }\r\n   }\r\n \r\n   async refreshReports() {\r\n-    console.log('ðŸ”„ Refreshing reports...');\r\n+    console.log('ðŸ”„ Manually refreshing reports...');\r\n+    \r\n+    const toast = await this.toastController.create({\r\n+      message: 'ðŸ”„ Refreshing charts...',\r\n+      duration: 1500,\r\n+      color: 'primary',\r\n+      position: 'top'\r\n+    });\r\n+    await toast.present();\r\n+    \r\n     this.destroyAllCharts();\r\n+    await new Promise(resolve => setTimeout(resolve, 300));\r\n     await this.loadReports();\r\n+    \r\n+    const successToast = await this.toastController.create({\r\n+      message: 'âœ… Charts refreshed successfully!',\r\n+      duration: 2000,\r\n+      color: 'success',\r\n+      position: 'top'\r\n+    });\r\n+    await successToast.present();\r\n   }\r\n \r\n   ngOnDestroy() {\r\n     if (this.salesChart) this.salesChart.destroy();\r\n"
                },
                {
                    "date": 1764628943247,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -68,36 +68,48 @@\n     console.log('Reports page initialized');\r\n   }\r\n \r\n   ngAfterViewInit() {\r\n-    console.log('ðŸš€ View initialized, loading reports...');\r\n-    // Delay to ensure canvas elements are fully rendered\r\n+    console.log('ðŸš€ View initialized');\r\n+    // Wait longer for Ionic to fully render the view\r\n     setTimeout(() => {\r\n-      this.loadReports();\r\n-    }, 500);\r\n+      this.checkAndLoadReports();\r\n+    }, 800);\r\n   }\r\n \r\n-  ionViewWillEnter() {\r\n-    console.log('ðŸš€ View will enter, preparing charts...');\r\n-  }\r\n-\r\n   ionViewDidEnter() {\r\n-    console.log('ðŸš€ View entered, ensuring charts render...');\r\n-    // Always reload charts when entering the view to ensure they display\r\n+    console.log('ðŸš€ View entered');\r\n+    // Only reload if charts don't exist\r\n     setTimeout(() => {\r\n       if (!this.salesChart || !this.categoryChart || !this.topSellersChart || !this.statusChart) {\r\n         console.log('âš ï¸ Charts missing, reloading...');\r\n-        this.loadReports();\r\n-      } else {\r\n-        console.log('âœ… Charts exist, forcing update...');\r\n-        this.forceChartsUpdate();\r\n+        this.checkAndLoadReports();\r\n       }\r\n-    }, 400);\r\n+    }, 500);\r\n   }\r\n \r\n-  ionViewWillLeave() {\r\n-    console.log('ðŸ‘‹ View leaving, preserving charts...');\r\n-    // Don't destroy charts when leaving, just hide them\r\n+  private checkAndLoadReports() {\r\n+    // Verify all canvas elements exist before attempting to load\r\n+    const salesCanvas = this.salesChartRef?.nativeElement;\r\n+    const categoryCanvas = this.categoryChartRef?.nativeElement;\r\n+    const topSellersCanvas = this.topSellersChartRef?.nativeElement;\r\n+    const statusCanvas = this.statusChartRef?.nativeElement;\r\n+\r\n+    console.log('Canvas elements check:', {\r\n+      salesCanvas: !!salesCanvas,\r\n+      categoryCanvas: !!categoryCanvas,\r\n+      topSellersCanvas: !!topSellersCanvas,\r\n+      statusCanvas: !!statusCanvas\r\n+    });\r\n+\r\n+    if (!salesCanvas || !categoryCanvas || !topSellersCanvas || !statusCanvas) {\r\n+      console.error('âŒ Some canvas elements not found, retrying in 1 second...');\r\n+      setTimeout(() => this.checkAndLoadReports(), 1000);\r\n+      return;\r\n+    }\r\n+\r\n+    console.log('âœ… All canvas elements found, loading reports...');\r\n+    this.loadReports();\r\n   }\r\n \r\n   private destroyAllCharts() {\r\n     if (this.salesChart) {\r\n@@ -127,40 +139,27 @@\n     console.log('ðŸ“Š Starting loadReports...');\r\n     this.loading = true;\r\n     \r\n     try {\r\n-      // Verify canvas elements exist\r\n-      if (!this.salesChartRef?.nativeElement || \r\n-          !this.categoryChartRef?.nativeElement || \r\n-          !this.topSellersChartRef?.nativeElement || \r\n-          !this.statusChartRef?.nativeElement) {\r\n-        console.error('âŒ Canvas elements not found! Retrying in 500ms...');\r\n-        await new Promise(resolve => setTimeout(resolve, 500));\r\n-      }\r\n-      \r\n       // Load stats first\r\n       await this.loadStats();\r\n       console.log('âœ… Stats loaded');\r\n       \r\n-      // Wait a bit then load charts sequentially\r\n-      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      // Load all charts with delays between each\r\n+      await new Promise(resolve => setTimeout(resolve, 250));\r\n       await this.loadSalesChart();\r\n-      console.log('âœ… Sales chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      await new Promise(resolve => setTimeout(resolve, 250));\r\n       await this.loadCategoryChart();\r\n-      console.log('âœ… Category chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      await new Promise(resolve => setTimeout(resolve, 250));\r\n       await this.loadTopSellersChart();\r\n-      console.log('âœ… Top sellers chart loaded');\r\n       \r\n-      await new Promise(resolve => setTimeout(resolve, 200));\r\n+      await new Promise(resolve => setTimeout(resolve, 250));\r\n       await this.loadStatusChart();\r\n-      console.log('âœ… Status chart loaded');\r\n       \r\n       // Force final update after all charts loaded\r\n-      await new Promise(resolve => setTimeout(resolve, 400));\r\n+      await new Promise(resolve => setTimeout(resolve, 300));\r\n       this.forceChartsUpdate();\r\n       \r\n       console.log('âœ…âœ…âœ… ALL CHARTS LOADED SUCCESSFULLY âœ…âœ…âœ…');\r\n     } catch (error) {\r\n@@ -177,9 +176,9 @@\n       // One more update after loading state changes\r\n       setTimeout(() => {\r\n         this.forceChartsUpdate();\r\n         console.log('ðŸ”„ Final chart update completed');\r\n-      }, 200);\r\n+      }, 300);\r\n     }\r\n   }\r\n   \r\n   private forceChartsUpdate() {\r\n@@ -229,16 +228,15 @@\n   }\r\n \r\n   async loadSalesChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ SALES CHART START');\r\n+      console.log('ðŸ”¥ Loading Sales Chart...');\r\n       \r\n-      if (!this.salesChartRef?.nativeElement) {\r\n-        console.error('âŒ Canvas not found');\r\n+      const canvas = this.salesChartRef?.nativeElement;\r\n+      if (!canvas) {\r\n+        console.error('âŒ Sales canvas not found');\r\n         return;\r\n       }\r\n-\r\n-      const canvas = this.salesChartRef.nativeElement as HTMLCanvasElement;\r\n       \r\n       // FORCE CANVAS TO BE VISIBLE\r\n       canvas.style.display = 'block';\r\n       canvas.style.visibility = 'visible';\r\n@@ -331,11 +329,11 @@\n         }\r\n       });\r\n \r\n       this.salesChart.update();\r\n-      console.log('âœ… SALES CHART CREATED WITH REAL DATA');\r\n+      console.log('âœ… Sales chart created successfully');\r\n     } catch (error) {\r\n-      console.error('âŒ SALES CHART ERROR:', error);\r\n+      console.error('âŒ Sales chart error:', error);\r\n     }\r\n   }\r\n   \r\n   private getLast7Days(): Date[] {\r\n@@ -349,12 +347,12 @@\n   }\r\n \r\n   async loadCategoryChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ CATEGORY CHART START');\r\n+      console.log('ðŸ”¥ Loading Category Chart...');\r\n \r\n       if (!this.categoryChartRef?.nativeElement) {\r\n-        console.error('âŒ Canvas not found');\r\n+        console.error('âŒ Category canvas not found');\r\n         return;\r\n       }\r\n \r\n       const canvas = this.categoryChartRef.nativeElement as HTMLCanvasElement;\r\n@@ -446,20 +444,20 @@\n         }\r\n       });\r\n \r\n       this.categoryChart.update();\r\n-      console.log('âœ… CATEGORY CHART CREATED WITH REAL DATA');\r\n+      console.log('âœ… Category chart created successfully');\r\n     } catch (error) {\r\n-      console.error('âŒ CATEGORY CHART ERROR:', error);\r\n+      console.error('âŒ Category chart error:', error);\r\n     }\r\n   }\r\n \r\n   async loadTopSellersChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ TOP SELLERS CHART START');\r\n+      console.log('ðŸ”¥ Loading Top Sellers Chart...');\r\n \r\n       if (!this.topSellersChartRef?.nativeElement) {\r\n-        console.error('âŒ Canvas not found');\r\n+        console.error('âŒ Top sellers canvas not found');\r\n         return;\r\n       }\r\n \r\n       const canvas = this.topSellersChartRef.nativeElement as HTMLCanvasElement;\r\n@@ -555,20 +553,20 @@\n         }\r\n       });\r\n \r\n       this.topSellersChart.update();\r\n-      console.log('âœ… TOP SELLERS CHART CREATED WITH REAL DATA');\r\n+      console.log('âœ… Top sellers chart created successfully');\r\n     } catch (error) {\r\n-      console.error('âŒ TOP SELLERS CHART ERROR:', error);\r\n+      console.error('âŒ Top sellers chart error:', error);\r\n     }\r\n   }\r\n \r\n   async loadStatusChart() {\r\n     try {\r\n-      console.log('ðŸ”¥ STATUS CHART START');\r\n+      console.log('ðŸ”¥ Loading Status Chart...');\r\n \r\n       if (!this.statusChartRef?.nativeElement) {\r\n-        console.error('âŒ Canvas not found');\r\n+        console.error('âŒ Status canvas not found');\r\n         return;\r\n       }\r\n \r\n       const canvas = this.statusChartRef.nativeElement as HTMLCanvasElement;\r\n@@ -660,11 +658,11 @@\n         }\r\n       });\r\n \r\n       this.statusChart.update();\r\n-      console.log('âœ… STATUS CHART CREATED WITH REAL DATA');\r\n+      console.log('âœ… Status chart created successfully');\r\n     } catch (error) {\r\n-      console.error('âŒ STATUS CHART ERROR:', error);\r\n+      console.error('âŒ Status chart error:', error);\r\n     }\r\n   }\r\n \r\n   async printReport() {\r\n"
                }
            ],
            "date": 1763388132036,
            "name": "Commit-0",
            "content": "import { Component, OnInit, ViewChild, ElementRef } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule, AlertController, ToastController } from '@ionic/angular';\r\nimport { OrderService } from 'src/app/services/order.service';\r\nimport { ProductService } from 'src/app/services/product.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { Chart, ChartConfiguration, registerables } from 'chart.js';\r\nimport jsPDF from 'jspdf';\r\nimport html2canvas from 'html2canvas';\r\n\r\nChart.register(...registerables);\r\n\r\ninterface SalesData {\r\n  date: string;\r\n  total: number;\r\n}\r\n\r\ninterface CategoryData {\r\n  category: string;\r\n  count: number;\r\n}\r\n\r\n@Component({\r\n  selector: 'app-reports',\r\n  templateUrl: './reports.page.html',\r\n  styleUrls: ['./reports.page.scss'],\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, IonicModule]\r\n})\r\nexport class ReportsPage implements OnInit {\r\n  @ViewChild('salesChart') salesChartRef!: ElementRef;\r\n  @ViewChild('categoryChart') categoryChartRef!: ElementRef;\r\n  @ViewChild('topSellersChart') topSellersChartRef!: ElementRef;\r\n  @ViewChild('statusChart') statusChartRef!: ElementRef;\r\n  @ViewChild('reportContent') reportContent!: ElementRef;\r\n\r\n  salesChart: Chart | null = null;\r\n  categoryChart: Chart | null = null;\r\n  topSellersChart: Chart | null = null;\r\n  statusChart: Chart | null = null;\r\n\r\n  loading = false;\r\n  dateRange = {\r\n    start: new Date(new Date().setDate(new Date().getDate() - 30)).toISOString().split('T')[0],\r\n    end: new Date().toISOString().split('T')[0]\r\n  };\r\n\r\n  stats = {\r\n    totalSales: 0,\r\n    totalOrders: 0,\r\n    totalProducts: 0,\r\n    totalUsers: 0,\r\n    completedOrders: 0,\r\n    pendingOrders: 0,\r\n    cancelledOrders: 0\r\n  };\r\n\r\n  constructor(\r\n    private orderService: OrderService,\r\n    private productService: ProductService,\r\n    private userService: UserService,\r\n    private alertController: AlertController,\r\n    private toastController: ToastController\r\n  ) {}\r\n\r\n  ngOnInit() {\r\n    this.loadReports();\r\n  }\r\n\r\n  async loadReports() {\r\n    this.loading = true;\r\n    try {\r\n      await Promise.all([\r\n        this.loadStats(),\r\n        this.loadSalesChart(),\r\n        this.loadCategoryChart(),\r\n        this.loadTopSellersChart(),\r\n        this.loadStatusChart()\r\n      ]);\r\n    } catch (error) {\r\n      console.error('Error loading reports:', error);\r\n      const toast = await this.toastController.create({\r\n        message: 'Failed to load reports',\r\n        duration: 3000,\r\n        color: 'danger'\r\n      });\r\n      await toast.present();\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  async loadStats() {\r\n    try {\r\n      const orders = await this.orderService.getAllOrders();\r\n      const products = await this.productService.getAllProducts();\r\n      const users = await this.userService.getAllUsers();\r\n\r\n      this.stats.totalOrders = orders.length;\r\n      this.stats.totalProducts = products.length;\r\n      this.stats.totalUsers = users.length;\r\n\r\n      this.stats.totalSales = orders\r\n        .filter((o: any) => o.status === 'completed')\r\n        .reduce((sum: number, order: any) => sum + (order.totalPrice || 0), 0);\r\n\r\n      this.stats.completedOrders = orders.filter((o: any) => o.status === 'completed').length;\r\n      this.stats.pendingOrders = orders.filter((o: any) => o.status === 'pending').length;\r\n      this.stats.cancelledOrders = orders.filter((o: any) => o.status === 'cancelled').length;\r\n    } catch (error) {\r\n      console.error('Error loading stats:', error);\r\n    }\r\n  }\r\n\r\n  async loadSalesChart() {\r\n    try {\r\n      const orders = await this.orderService.getAllOrders();\r\n      \r\n      // Group orders by date\r\n      const salesByDate = new Map<string, number>();\r\n      orders.forEach((order: any) => {\r\n        if (order.status === 'completed' && order.createdAt) {\r\n          const date = new Date(order.createdAt.toDate()).toLocaleDateString();\r\n          const current = salesByDate.get(date) || 0;\r\n          salesByDate.set(date, current + (order.totalPrice || 0));\r\n        }\r\n      });\r\n\r\n      const sortedDates = Array.from(salesByDate.keys()).sort((a, b) => \r\n        new Date(a).getTime() - new Date(b).getTime()\r\n      );\r\n\r\n      const data = sortedDates.map(date => salesByDate.get(date) || 0);\r\n\r\n      setTimeout(() => {\r\n        if (this.salesChartRef) {\r\n          if (this.salesChart) this.salesChart.destroy();\r\n          \r\n          const ctx = this.salesChartRef.nativeElement.getContext('2d');\r\n          this.salesChart = new Chart(ctx, {\r\n            type: 'line',\r\n            data: {\r\n              labels: sortedDates,\r\n              datasets: [{\r\n                label: 'Sales (â‚±)',\r\n                data: data,\r\n                borderColor: '#ffc107',\r\n                backgroundColor: 'rgba(255, 193, 7, 0.1)',\r\n                tension: 0.4,\r\n                fill: true\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              plugins: {\r\n                legend: { display: true },\r\n                title: { display: true, text: 'Sales Over Time' }\r\n              },\r\n              scales: {\r\n                y: { beginAtZero: true }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('Error loading sales chart:', error);\r\n    }\r\n  }\r\n\r\n  async loadCategoryChart() {\r\n    try {\r\n      const products = await this.productService.getAllProducts();\r\n      \r\n      const categoryCount = new Map<string, number>();\r\n      products.forEach((product: any) => {\r\n        const category = product.category || 'Other';\r\n        categoryCount.set(category, (categoryCount.get(category) || 0) + 1);\r\n      });\r\n\r\n      const categories = Array.from(categoryCount.keys());\r\n      const counts = categories.map(cat => categoryCount.get(cat) || 0);\r\n\r\n      setTimeout(() => {\r\n        if (this.categoryChartRef) {\r\n          if (this.categoryChart) this.categoryChart.destroy();\r\n          \r\n          const ctx = this.categoryChartRef.nativeElement.getContext('2d');\r\n          this.categoryChart = new Chart(ctx, {\r\n            type: 'pie',\r\n            data: {\r\n              labels: categories,\r\n              datasets: [{\r\n                data: counts,\r\n                backgroundColor: [\r\n                  '#ffc107', '#4caf50', '#2196f3', '#ff5722', '#9c27b0', '#00bcd4', '#ff9800'\r\n                ]\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              plugins: {\r\n                legend: { position: 'right' },\r\n                title: { display: true, text: 'Products by Category' }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('Error loading category chart:', error);\r\n    }\r\n  }\r\n\r\n  async loadTopSellersChart() {\r\n    try {\r\n      const orders = await this.orderService.getAllOrders();\r\n      const users = await this.userService.getAllUsers();\r\n      \r\n      const salesBySeller = new Map<string, { name: string; total: number }>();\r\n      \r\n      orders.forEach((order: any) => {\r\n        if (order.status === 'completed') {\r\n          const sellerId = order.sellerId;\r\n          const current = salesBySeller.get(sellerId) || { name: order.sellerName, total: 0 };\r\n          current.total += order.totalPrice || 0;\r\n          salesBySeller.set(sellerId, current);\r\n        }\r\n      });\r\n\r\n      const topSellers = Array.from(salesBySeller.values())\r\n        .sort((a, b) => b.total - a.total)\r\n        .slice(0, 10);\r\n\r\n      setTimeout(() => {\r\n        if (this.topSellersChartRef) {\r\n          if (this.topSellersChart) this.topSellersChart.destroy();\r\n          \r\n          const ctx = this.topSellersChartRef.nativeElement.getContext('2d');\r\n          this.topSellersChart = new Chart(ctx, {\r\n            type: 'bar',\r\n            data: {\r\n              labels: topSellers.map(s => s.name),\r\n              datasets: [{\r\n                label: 'Sales (â‚±)',\r\n                data: topSellers.map(s => s.total),\r\n                backgroundColor: '#4caf50'\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              indexAxis: 'y',\r\n              plugins: {\r\n                legend: { display: false },\r\n                title: { display: true, text: 'Top 10 Sellers' }\r\n              },\r\n              scales: {\r\n                x: { beginAtZero: true }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('Error loading top sellers chart:', error);\r\n    }\r\n  }\r\n\r\n  async loadStatusChart() {\r\n    try {\r\n      const orders = await this.orderService.getAllOrders();\r\n      \r\n      const statusCount = {\r\n        pending: 0,\r\n        confirmed: 0,\r\n        completed: 0,\r\n        cancelled: 0\r\n      };\r\n\r\n      orders.forEach((order: any) => {\r\n        const status = order.status || 'pending';\r\n        if (status in statusCount) {\r\n          (statusCount as any)[status]++;\r\n        }\r\n      });\r\n\r\n      setTimeout(() => {\r\n        if (this.statusChartRef) {\r\n          if (this.statusChart) this.statusChart.destroy();\r\n          \r\n          const ctx = this.statusChartRef.nativeElement.getContext('2d');\r\n          this.statusChart = new Chart(ctx, {\r\n            type: 'doughnut',\r\n            data: {\r\n              labels: ['Pending', 'Confirmed', 'Completed', 'Cancelled'],\r\n              datasets: [{\r\n                data: [\r\n                  statusCount.pending,\r\n                  statusCount.confirmed,\r\n                  statusCount.completed,\r\n                  statusCount.cancelled\r\n                ],\r\n                backgroundColor: ['#ff9800', '#2196f3', '#4caf50', '#f44336']\r\n              }]\r\n            },\r\n            options: {\r\n              responsive: true,\r\n              maintainAspectRatio: false,\r\n              plugins: {\r\n                legend: { position: 'bottom' },\r\n                title: { display: true, text: 'Order Status Breakdown' }\r\n              }\r\n            }\r\n          });\r\n        }\r\n      }, 100);\r\n    } catch (error) {\r\n      console.error('Error loading status chart:', error);\r\n    }\r\n  }\r\n\r\n  async printReport() {\r\n    window.print();\r\n  }\r\n\r\n  async exportPDF() {\r\n    this.loading = true;\r\n    try {\r\n      const element = this.reportContent.nativeElement;\r\n      const canvas = await html2canvas(element, {\r\n        scale: 2,\r\n        logging: false,\r\n        useCORS: true\r\n      });\r\n\r\n      const imgData = canvas.toDataURL('image/png');\r\n      const pdf = new jsPDF('p', 'mm', 'a4');\r\n      const imgWidth = 210; // A4 width in mm\r\n      const imgHeight = (canvas.height * imgWidth) / canvas.width;\r\n      \r\n      let heightLeft = imgHeight;\r\n      let position = 0;\r\n\r\n      pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n      heightLeft -= 297; // A4 height\r\n\r\n      while (heightLeft >= 0) {\r\n        position = heightLeft - imgHeight;\r\n        pdf.addPage();\r\n        pdf.addImage(imgData, 'PNG', 0, position, imgWidth, imgHeight);\r\n        heightLeft -= 297;\r\n      }\r\n\r\n      pdf.save(`CampusMarket-Report-${new Date().toLocaleDateString()}.pdf`);\r\n\r\n      const toast = await this.toastController.create({\r\n        message: 'Report exported successfully!',\r\n        duration: 2000,\r\n        color: 'success'\r\n      });\r\n      await toast.present();\r\n    } catch (error) {\r\n      console.error('Error exporting PDF:', error);\r\n      const toast = await this.toastController.create({\r\n        message: 'Failed to export PDF',\r\n        duration: 3000,\r\n        color: 'danger'\r\n      });\r\n      await toast.present();\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  async refreshReports() {\r\n    await this.loadReports();\r\n  }\r\n\r\n  ngOnDestroy() {\r\n    if (this.salesChart) this.salesChart.destroy();\r\n    if (this.categoryChart) this.categoryChart.destroy();\r\n    if (this.topSellersChart) this.topSellersChart.destroy();\r\n    if (this.statusChart) this.statusChart.destroy();\r\n  }\r\n}\r\n"
        }
    ]
}