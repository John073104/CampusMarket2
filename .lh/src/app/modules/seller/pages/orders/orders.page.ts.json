{
    "sourceFile": "src/app/modules/seller/pages/orders/orders.page.ts",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 3,
            "patches": [
                {
                    "date": 1763638999725,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1763883833614,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -37,10 +37,18 @@\n     try {\r\n       const user = this.authService.getCurrentUser();\r\n       if (user && user.userId) {\r\n         console.log('Loading orders for seller:', user.userId);\r\n-        this.orders = await this.orderService.getOrdersBySeller(user.userId);\r\n-        console.log('Loaded orders:', this.orders.length);\r\n+        try {\r\n+          this.orders = await this.orderService.getOrdersBySeller(user.userId);\r\n+          console.log('Loaded orders:', this.orders.length);\r\n+        } catch (error: any) {\r\n+          console.warn('Error loading orders, retrying...', error);\r\n+          // Retry once after a short delay\r\n+          await new Promise(resolve => setTimeout(resolve, 1000));\r\n+          this.orders = await this.orderService.getOrdersBySeller(user.userId);\r\n+          console.log('Loaded orders (retry):', this.orders.length);\r\n+        }\r\n       } else {\r\n         console.error('No user found');\r\n         this.orders = [];\r\n       }\r\n"
                },
                {
                    "date": 1763884667879,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -90,6 +90,13 @@\n       return timestamp.toDate().toLocaleDateString();\r\n     }\r\n     return 'N/A';\r\n   }\r\n+\r\n+  getOrderItemsDisplay(order: Order): string {\r\n+    if (order.items.length === 1) {\r\n+      return order.items[0].productName;\r\n+    }\r\n+    return `${order.items.length} items`;\r\n+  }\r\n }\r\n \r\n"
                },
                {
                    "date": 1763884980883,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -93,9 +93,15 @@\n   }\r\n \r\n   getOrderItemsDisplay(order: Order): string {\r\n     if (order.items.length === 1) {\r\n-      return order.items[0].productName;\r\n+      const item = order.items[0];\r\n+      const productName = item.productName;\r\n+      // Check if product name looks valid (not empty, not just seller name)\r\n+      if (productName && productName.trim().length > 0) {\r\n+        return `${productName} × ${item.quantity}`;\r\n+      }\r\n+      return `Product × ${item.quantity}`;\r\n     }\r\n     return `${order.items.length} items`;\r\n   }\r\n }\r\n"
                }
            ],
            "date": 1763638999725,
            "name": "Commit-0",
            "content": "import { Component, OnInit } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { IonicModule } from '@ionic/angular';\r\nimport { Router } from '@angular/router';\r\nimport { OrderService } from '../../../../services/order.service';\r\nimport { AuthService } from '../../../../services/auth.service';\r\nimport { Order, OrderStatus } from '../../../../models/order.model';\r\n\r\n@Component({\r\n  selector: 'app-orders',\r\n  templateUrl: './orders.page.html',\r\n  styleUrls: ['./orders.page.scss'],\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule, IonicModule]\r\n})\r\nexport class OrdersPage implements OnInit {\r\n  orders: Order[] = [];\r\n  loading: boolean = false;\r\n\r\n  constructor(\r\n    private orderService: OrderService,\r\n    private authService: AuthService,\r\n    private router: Router\r\n  ) { }\r\n\r\n  ngOnInit() {\r\n    this.loadOrders();\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    this.loadOrders();\r\n  }\r\n\r\n  async loadOrders() {\r\n    this.loading = true;\r\n    try {\r\n      const user = this.authService.getCurrentUser();\r\n      if (user && user.userId) {\r\n        console.log('Loading orders for seller:', user.userId);\r\n        this.orders = await this.orderService.getOrdersBySeller(user.userId);\r\n        console.log('Loaded orders:', this.orders.length);\r\n      } else {\r\n        console.error('No user found');\r\n        this.orders = [];\r\n      }\r\n    } catch (error) {\r\n      console.error('Error loading orders:', error);\r\n      this.orders = [];\r\n    } finally {\r\n      this.loading = false;\r\n    }\r\n  }\r\n\r\n  async updateStatus(orderId: string, status: OrderStatus) {\r\n    try {\r\n      await this.orderService.updateOrderStatus(orderId, status);\r\n      this.loadOrders();\r\n    } catch (error) {\r\n      console.error('Error updating status:', error);\r\n    }\r\n  }\r\n\r\n  viewOrderDetail(orderId: string) {\r\n    this.router.navigate(['/seller/order-detail', orderId]);\r\n  }\r\n\r\n  getStatusColor(status: string): string {\r\n    const colors: any = {\r\n      'placed': 'primary',\r\n      'confirmed': 'secondary',\r\n      'preparing': 'warning',\r\n      'ready': 'success',\r\n      'completed': 'success',\r\n      'cancelled': 'danger'\r\n    };\r\n    return colors[status] || 'medium';\r\n  }\r\n\r\n  formatDate(timestamp: any): string {\r\n    if (timestamp?.toDate) {\r\n      return timestamp.toDate().toLocaleDateString();\r\n    }\r\n    return 'N/A';\r\n  }\r\n}\r\n\r\n"
        }
    ]
}