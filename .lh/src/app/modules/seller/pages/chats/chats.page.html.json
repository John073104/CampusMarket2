{
    "sourceFile": "src/app/modules/seller/pages/chats/chats.page.html",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 0,
            "patches": [
                {
                    "date": 1763461234097,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                }
            ],
            "date": 1763461234097,
            "name": "Commit-0",
            "content": "<ion-header [translucent]=\"true\">\r\n  <ion-toolbar color=\"success\">\r\n    <ion-buttons slot=\"start\">\r\n      <ion-back-button (click)=\"goBack()\" [defaultHref]=\"selectedChat ? '' : '/seller/dashboard'\"></ion-back-button>\r\n    </ion-buttons>\r\n    <ion-title>{{ selectedChat ? getOtherParticipantName(selectedChat) : 'Messages' }}</ion-title>\r\n    @if (!selectedChat) {\r\n      <ion-buttons slot=\"end\">\r\n        <ion-button (click)=\"openNewChatModal()\">\r\n          <ion-icon name=\"create\" slot=\"icon-only\"></ion-icon>\r\n        </ion-button>\r\n      </ion-buttons>\r\n    }\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content [fullscreen]=\"true\">\r\n  @if (loading) {\r\n    <div class=\"loading-container\">\r\n      <ion-spinner name=\"crescent\"></ion-spinner>\r\n      <p>Loading chats...</p>\r\n    </div>\r\n  } @else if (!selectedChat) {\r\n    <!-- Chat List -->\r\n    @if (chats.length === 0) {\r\n      <div class=\"empty-state\">\r\n        <ion-icon name=\"chatbubbles-outline\"></ion-icon>\r\n        <h2>No Messages Yet</h2>\r\n        <p>Start a conversation with customers or admin</p>\r\n        <ion-button expand=\"block\" (click)=\"openNewChatModal()\">\r\n          <ion-icon name=\"add\" slot=\"start\"></ion-icon>\r\n          Start New Chat\r\n        </ion-button>\r\n      </div>\r\n    } @else {\r\n      <ion-list>\r\n        @for (chat of chats; track chat.chatId) {\r\n          <ion-item button (click)=\"selectChat(chat)\">\r\n            <ion-avatar slot=\"start\">\r\n              <ion-icon name=\"person-circle-outline\"></ion-icon>\r\n            </ion-avatar>\r\n            <ion-label>\r\n              <h2>{{ getOtherParticipantName(chat) }}</h2>\r\n              <p>{{ chat.lastMessage }}</p>\r\n            </ion-label>\r\n            @if (getUnreadCount(chat) > 0) {\r\n              <ion-badge color=\"danger\" slot=\"end\">{{ getUnreadCount(chat) }}</ion-badge>\r\n            }\r\n          </ion-item>\r\n        }\r\n      </ion-list>\r\n    }\r\n  } @else {\r\n    <!-- Chat Messages -->\r\n    <div #chatContent class=\"chat-messages\">\r\n      @for (message of messages; track message.messageId) {\r\n        <div [class]=\"message.senderId === currentUserId ? 'message message-sent' : 'message message-received'\">\r\n          <div class=\"message-content\">\r\n            @if (message.senderId !== currentUserId) {\r\n              <p class=\"message-sender\">{{ message.senderName }}</p>\r\n            }\r\n            <p class=\"message-text\">{{ message.text }}</p>\r\n            <p class=\"message-time\">{{ message.timestamp | date:'short' }}</p>\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n\r\n    <!-- Message Input -->\r\n    <ion-footer>\r\n      <ion-toolbar>\r\n        <ion-item lines=\"none\">\r\n          <ion-input \r\n            [(ngModel)]=\"newMessage\" \r\n            placeholder=\"Type a message...\"\r\n            (keyup.enter)=\"sendMessage()\"\r\n          ></ion-input>\r\n          <ion-button slot=\"end\" (click)=\"sendMessage()\" [disabled]=\"!newMessage.trim()\">\r\n            <ion-icon name=\"send\" slot=\"icon-only\"></ion-icon>\r\n          </ion-button>\r\n        </ion-item>\r\n      </ion-toolbar>\r\n    </ion-footer>\r\n  }\r\n</ion-content>\r\n"
        }
    ]
}